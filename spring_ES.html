<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Spring Framework</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="article">
<div id="header">
<h1>Spring Framework</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introducción_al_framework_spring">Introducción al Framework Spring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Framework es un framework de código abierto para el desarrollo de aplicaciones empresariales en Java. Fue creado por Rod Johnson en 2002.</p>
</div>
<div class="paragraph">
<p>El framework se basa en la inversión de control (IoC) y la inyección de dependencias (DI), lo que permite una separación clara entre la lógica de la aplicación y la infraestructura subyacente. Esto permite a los desarrolladores centrarse en la lógica de negocio de la aplicación, sin tener que preocuparse por la infraestructura subyacente.</p>
</div>
<div class="paragraph">
<p>Spring Boot es un framework de Java que se basa en Spring Framework y se utiliza para desarrollar aplicaciones web y móviles de manera rápida y sencilla. Fue creado en 203 por Pivotal Software y se ha convertido en una de las herramientas más populares para el desarrollo de aplicaciones empresariales en Java.</p>
</div>
<div class="sect2">
<h3 id="_visión_general_del_framework_spring">Visión general del Framework Spring</h3>
<div class="paragraph">
<p>Spring Boot es un framework de Java diseñado para facilitar el desarrollo de aplicaciones empresariales de manera rápida y sencilla. Este framework se basa en Spring Framework, pero se diferencia en que utiliza una estrategia de "opiniónated" para la configuración y un enfoque de "convención sobre configuración" que reduce la cantidad de código que los desarrolladores necesitan escribir.</p>
</div>
<div class="paragraph">
<p>Una de las principales características de Spring Boot es la configuración automática, que simplifica la configuración de la aplicación al eliminar la necesidad de configuración manual. Spring Boot utiliza anotaciones y metadatos para configurar automáticamente la aplicación, lo que permite a los desarrolladores centrarse en la lógica de la aplicación en lugar de la configuración.</p>
</div>
<div class="paragraph">
<p>Además, Spring Boot es altamente modular y se integra fácilmente con otros frameworks y tecnologías. Esto significa que los desarrolladores pueden utilizar diferentes tecnologías según sus necesidades sin tener que preocuparse por la compatibilidad y la configuración.</p>
</div>
<div class="paragraph">
<p>Otra característica importante de Spring Boot es su capacidad para crear aplicaciones autocontenidas y ejecutables en un solo archivo JAR. Esto significa que las aplicaciones se pueden desplegar fácilmente en diferentes entornos sin tener que preocuparse por las dependencias y configuraciones externas.</p>
</div>
<div class="paragraph">
<p>En resumen, Spring Boot es un framework eficiente que simplifica el desarrollo de aplicaciones empresariales en Java.</p>
</div>
</div>
<div class="sect2">
<h3 id="_arquitectura_de_spring_boot">Arquitectura de Spring Boot</h3>
<div class="paragraph">
<p>La arquitectura de Spring Boot se basa en el framework Spring, que sigue el patrón de diseño de inversión de control (IoC) y el principio de “convención sobre configuración”. Spring Boot utiliza anotaciones para definir las capas de la aplicación, como Repository, Service y Component. Estas anotaciones permiten a Spring Boot crear automáticamente los objetos necesarios y establecer las dependencias entre ellos. Además, Spring Boot ofrece una serie de herramientas para facilitar el desarrollo, como los starters, que son dependencias predefinidas para diferentes tipos de proyectos, o el autoconfigurador, que adapta la configuración según las dependencias disponibles. Con Spring Boot se puede crear una aplicación autoejecutable que contiene un servidor web embebido.</p>
</div>
</div>
<div class="sect2">
<h3 id="_módulos_de_spring_boot">Módulos de Spring Boot</h3>
<div class="paragraph">
<p>Spring Framework se compone de varios módulos que ofrecen diferentes servicios y funcionalidades. Algunos de los paquetes más importantes de Spring Framework son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Spring Core: proporciona soporte para la inversión de control (IoC) y la inyección de dependencias (DI).</p>
</li>
<li>
<p>Spring JDBC: proporciona soporte para la conexión con bases de datos relacionales.</p>
</li>
<li>
<p>Spring ORM: proporciona soporte para la conexión con bases de datos relacionales y NoSQL.</p>
</li>
<li>
<p>Spring Web: proporciona soporte para la creación de aplicaciones web.</p>
</li>
<li>
<p>Spring MVC: proporciona soporte para la creación de aplicaciones web basadas en el patrón de diseño MVC.</p>
</li>
<li>
<p>Spring AOP: proporciona soporte para la programación orientada a aspectos (AOP).
*Spring Session: proporciona soporte para la gestión de sesiones.</p>
</li>
<li>
<p>Spring Security: proporciona soporte para la seguridad de aplicaciones web.</p>
</li>
<li>
<p>Spring Batch: proporciona soporte para la creación de aplicaciones de procesamiento de lotes.</p>
</li>
<li>
<p>Spring Web Flow: proporciona soporte para la creación de aplicaciones web basadas en el patrón de diseño de flujo de trabajo.</p>
</li>
<li>
<p>Spring Integration: proporciona soporte para la integración con otras tecnologías y frameworks.</p>
</li>
<li>
<p>Spring Data: proporciona soporte para la conexión con bases de datos relacionales y NoSQL.</p>
</li>
<li>
<p>Spring Test: proporciona soporte para la creación de pruebas unitarias y de integración.</p>
</li>
<li>
<p>Spring Boot: proporciona soporte para la creación de aplicaciones autocontenidas y ejecutables en un solo archivo JAR.</p>
</li>
<li>
<p>Spring Cloud: proporciona soporte para la creación de aplicaciones basadas en microservicios.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ventajas_del_framework_spring_boot">Ventajas del Framework Spring Boot</h3>
<div class="ulist">
<div class="title">Ventajas de Spring Boot frente a Spring Framework</div>
<ul>
<li>
<p><strong>Configuración automática</strong>: Spring Boot utiliza una estrategia de configuración automática, lo que significa que configura la aplicación de manera predeterminada y elimina la necesidad de escribir código de configuración manual.</p>
</li>
<li>
<p><strong>Menos código</strong>: Spring Boot permite a los desarrolladores crear aplicaciones con menos código en comparación con Spring Framework. Esto se debe a que Spring Boot viene con configuraciones predefinidas y dependencias incorporadas.</p>
</li>
<li>
<p><strong>Integración simplificada</strong>: Spring Boot simplifica la integración con otras tecnologías y frameworks.</p>
</li>
<li>
<p><strong>Enfoque de "opinionated"</strong>: lo que significa que proporciona soluciones predefinidas para la mayoría de los casos de uso comunes.</p>
</li>
<li>
<p><strong>Microservicios</strong>: Spring Boot es ideal para el desarrollo de aplicaciones de microservicios, lo que significa que los desarrolladores pueden crear aplicaciones modulares y escalables que sean fáciles de mantener y actualizar.</p>
</li>
<li>
<p><strong>Despliegue sencillo</strong>: Spring Boot permite a los desarrolladores crear aplicaciones autocontenidas y ejecutables en un solo archivo JAR. Esto significa que las aplicaciones se pueden desplegar fácilmente en diferentes entornos sin tener que preocuparse por las dependencias y configuraciones externas.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creación_de_aplicaciones_spring_boot">Creación de aplicaciones Spring Boot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Boot es un framework de Java que se utiliza para crear aplicaciones autocontenidas y ejecutables en un solo archivo JAR. Este framework se basa en Spring Framework, pero se diferencia en que utiliza una estrategia de "opiniónated" para la configuración y un enfoque de "convención sobre configuración" que reduce la cantidad de código que los desarrolladores necesitan escribir.</p>
</div>
<div class="sect2">
<h3 id="_creación_de_una_aplicación_spring_boot">Creación de una aplicación Spring Boot</h3>
<div class="paragraph">
<p>Para crear una aplicación Spring Boot, hay que seguir los siguientes pasos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Instalar Spring Boot: puedes usar Spring Boot Starter, que es un Eclipse con Spring Boot integrado, o instalar Spring Tools en tu IDE preferido.</p>
</li>
<li>
<p>Crear un proyecto: puedes usar el asistente de Spring Boot para generar un proyecto con las dependencias y la configuración necesarias, o usar el sitio web <a href="https://start.spring.io/" class="bare">https://start.spring.io/</a> para descargar un proyecto inicializado.</p>
</li>
<li>
<p>Desarrollar los servicios: puedes crear clases Java con anotaciones de Spring para definir los controladores, los servicios y los repositorios que componen tu aplicación. También puedes usar otras tecnologías como Thymeleaf o JPA para crear vistas o acceder a bases de datos.</p>
</li>
<li>
<p>Probar la aplicación: puedes ejecutar la aplicación desde tu IDE o desde la línea de comandos usando el comando <code>mvn spring-boot:run</code> o <code>java -jar nombre-del-archivo.jar</code>. Luego puedes acceder a la aplicación desde tu navegador usando la dirección <a href="http://localhost:8080/" class="bare">http://localhost:8080/</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creación_de_una_aplicación_spring_boot_con_spring_initializr">Creación de una aplicación Spring Boot con Spring Initializr</h3>
<div class="paragraph">
<p>Para crear una aplicación Spring Boot con Spring Initializr, puedes seguir estos pasos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Accede al sitio web <a href="https://start.spring.io/" class="bare">https://start.spring.io/</a>.</p>
</li>
<li>
<p>Elige si quieres usar Maven o Gradle para la construcción de tu proyecto.</p>
</li>
<li>
<p>Especifica la versión de Spring Boot y de Java que quieres usar.</p>
</li>
<li>
<p>Introduce los datos de tu proyecto, como el grupo, el artefacto, el nombre y la descripción.</p>
</li>
<li>
<p>Selecciona las dependencias que necesitas para tu aplicación. Puedes buscarlas por nombre o por categoría.</p>
</li>
<li>
<p>Haz clic en Generate para descargar el proyecto en un archivo ZIP.</p>
</li>
<li>
<p>Extrae los archivos del ZIP en una carpeta local y abre el proyecto con tu IDE preferido.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_spring_boot_con_maven">Spring Boot con Maven</h3>
<div class="paragraph">
<p>Para gestionar las tareas de compilación, ejecución, limpieza y testing en Spring Boot con Maven, puedes usar los siguientes comandos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para compilar tu aplicación, usa el comando <code>mvn compile</code>.</p>
</li>
<li>
<p>Para ejecutar tu aplicación, usa el comando <code>mvn spring-boot:run</code>. Asegúrate de estar en la carpeta del archivo JAR que se encuentra en la carpeta "target".</p>
</li>
<li>
<p>Para limpiar tu proyecto, usa el comando <code>mvn clean</code>. Esto eliminará los archivos generados por la compilación.</p>
</li>
<li>
<p>Para realizar los tests de tu aplicación, usa el comando <code>mvn test</code>. Puedes usar las anotaciones y funcionalidades que te proporciona Spring Boot para crear tests unitarios e integrados.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">-El archivo POM de tu proyecto debe tener las siguientes dependencias:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_boot_con_gradle">Spring Boot con Gradle</h3>
<div class="paragraph">
<p>Para gestionar las tareas de compilación, ejecución, limpieza y testing en Spring Boot con Gradle, puedes usar los siguientes comandos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Para compilar tu aplicación, usa el comando <code>gradle build</code>. Este comando descargará las dependencias, construirá las clases, ejecutará los tests y empaquetará las clases en un archivo JAR.</p>
</li>
<li>
<p>Para ejecutar tu aplicación, usa el comando <code>gradle bootRun</code>. Este comando ejecutará tu aplicación en forma explosionada.</p>
</li>
<li>
<p>Para limpiar tu proyecto, usa el comando <code>gradle clean</code>. Este comando eliminará los archivos generados por la compilación.</p>
</li>
<li>
<p>Para realizar los tests de tu aplicación, usa el comando <code>gradle test</code>. Puedes usar las anotaciones y funcionalidades que te proporciona Spring Boot para crear tests unitarios e integrados.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">El archivo build.gradle de tu proyecto debe tener las siguientes dependencias:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_core">Spring Core</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_visión_general_de_spring_core">Visión general de Spring Core</h3>
<div class="paragraph">
<p>Spring Core es el módulo central del framework Spring que proporciona las funcionalidades básicas para el desarrollo de aplicaciones Java empresariales. Spring Core se basa en el concepto de <strong>inyección de dependencias</strong>, que es un patrón de diseño que permite desacoplar los componentes de una aplicación y facilitar su configuración, reutilización y testing. Spring Core también ofrece otras características como el soporte para anotaciones, la gestión del ciclo de vida de los objetos, la integración con otras tecnologías y el acceso a recursos externos.</p>
</div>
<div class="paragraph">
<p>Spring Core es el motor del framework Spring y el fundamento sobre el que se construyen los demás módulos. Conocer Spring Core te permitirá aprovechar todo el potencial de esta plataforma para crear aplicaciones profesionales, escalables y mantenibles.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inyección_de_dependencias">Inyección de dependencias</h3>
<div class="paragraph">
<p>La inyección de dependencias en Spring Core es un patrón de diseño que permite que los objetos no sean responsables de crear e inicializar sus dependencias, sino que estas sean provistas por otro objeto. En el caso de Spring, ese objeto es el <strong>contenedor IoC</strong>, que es el encargado de gestionar el ciclo de vida y la configuración de los objetos que forman parte de la aplicación.</p>
</div>
<div class="paragraph">
<p>La inyección de dependencias en Spring Core se puede realizar mediante diferentes modos, como el uso de anotaciones, archivos XML o clases Java. El modo más común y recomendado es mediante anotaciones, que son etiquetas que se colocan sobre las clases o los atributos para indicar al contenedor IoC cómo debe crear e inyectar las dependencias.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inversión_de_control">Inversión de control</h3>
<div class="paragraph">
<p>La inversión de control (IoC) es un patrón de diseño que consiste en delegar el control de la creación, inicialización y conexión de los objetos de una aplicación a un objeto externo llamado <strong>contenedor</strong>. El contenedor se encarga de gestionar el ciclo de vida y la configuración de los objetos, que son llamados <strong>beans</strong>, y proveerlos cuando sean necesarios a través de la <strong>inyección de dependencias</strong>.</p>
</div>
<div class="paragraph">
<p>En Spring Boot, el contenedor IoC está representado por la interfaz <strong>ApplicationContext</strong>, que se puede configurar mediante anotaciones, archivos XML o clases Java. El contenedor IoC lee la configuración y crea e inyecta los beans según las anotaciones o las definiciones que se hayan especificado.</p>
</div>
<div class="paragraph">
<p>La inversión de control en Spring Boot permite desacoplar los componentes de una aplicación y facilitar su reutilización, testing y mantenimiento. Además, permite aprovechar las características adicionales que ofrece el framework Spring a través del tiempo de vida de los objetos.</p>
</div>
</div>
<div class="sect2">
<h3 id="_principales_anotaciones_de_spring_core">Principales anotaciones de Spring Core</h3>
<div class="ulist">
<div class="title">Las principales anotaciones de Spring Core son las siguientes:</div>
<ul>
<li>
<p><code>@SpringBootApplication</code>: indica que una clase es la principal de una aplicación spring boot y habilita la configuración automática, el escaneo de componentes y otras características.</p>
</li>
<li>
<p><code>@Configuration</code>: indica que una clase define beans adicionales o importa otras clases de configuración para el contexto de spring.</p>
</li>
<li>
<p><code>@EnableAutoConfiguration</code>: indica que se debe usar el mecanismo de configuración automática de spring boot para inferir los beans necesarios según las dependencias del classpath.</p>
</li>
<li>
<p><code>@ComponentScan</code>: indica el paquete o los paquetes donde buscar beans anotados con @Component, @Repository, @Service o @Controller.</p>
</li>
<li>
<p><code>@Component</code>: indica que una clase es un componente gestionado por el contenedor IoC y puede ser inyectado como una dependencia.</p>
</li>
<li>
<p><code>@Autowired</code>: indica que un atributo debe ser inyectado con una instancia del tipo adecuado creada por el contenedor IoC.</p>
</li>
<li>
<p><code>@Qualifier</code>: indica el nombre específico del componente que se quiere inyectar cuando hay más de uno del mismo tipo.</p>
</li>
<li>
<p><code>@Value</code>: indica que un atributo debe ser inyectado con un valor literal o una expresión.</p>
</li>
<li>
<p><code>@Required</code>: se aplica a un método setter y indica que el bean anotado debe llenarse en el momento de la configuración con la propiedad requerida, de lo contrario arroja una excepción BeanInitilizationException.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Además, existen otras anotaciones que son especializaciones de <code>@Component</code> y que categorizan los componentes según su responsabilidad. Estas son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Controller</code>: indica que una clase es un controlador web y puede manejar peticiones HTTP.</p>
</li>
<li>
<p><code>@Service</code>: indica que una clase es un servicio de negocio y contiene la lógica de aplicación.</p>
</li>
<li>
<p><code>@Repository</code>: indica que una clase es un repositorio de datos y puede acceder a la capa de persistencia.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de una clase que se inyecta en otra clase mediante anotaciones:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">//Clase principal de la aplicación
@SpringBootApplication //Indica que es la clase principal y habilita la configuración automática y el escaneo de componentes
public class Aplicacion {

    public static void main(String[] args) {
        SpringApplication.run(Aplicacion.class, args); //Inicia la aplicación spring boot
    }
}

//Clase de configuración
@Configuration //Indica que define beans adicionales o importa otras clases de configuración
public class Configuracion {

    @Bean //Indica que el método devuelve un bean que debe ser registrado en el contexto de spring
    public Servicio servicio() {
        return new Servicio(); //Crea una instancia del servicio
    }
}

//Clase de servicio
@Service //Indica que es un bean de la capa de negocio
public class Servicio {

    public String saludo() {
        return "Hola desde el servicio"; //Devuelve un saludo
    }
}

//Clase de controlador
@Controller //Indica que es un controlador para spring MVC
public class Controlador {

    @Autowired //Indica que la propiedad debe ser inyectada con otro bean de spring (en este caso el servicio)
    private Servicio servicio;

    @GetMapping("/") //Indica que el método maneja las peticiones GET a la ruta "/"
    public String inicio(Model model) {
        model.addAttribute("saludo", servicio.saludo()); //Añade el saludo del servicio al modelo
        return "inicio"; //Devuelve el nombre de la vista a mostrar (en este caso "inicio.html")
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_web">Spring Web</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_visión_general_de_spring_web">Visión general de Spring Web</h3>
<div class="paragraph">
<p>De acuerdo, puedo darte una visión general del paquete Spring Web en el framework Spring Boot. Según los resultados de búsqueda¹²³, el paquete Spring Web es uno de los starters que ofrece Spring Boot para facilitar el desarrollo de aplicaciones web con Spring. Al incluir este paquete en el proyecto, se obtienen las siguientes ventajas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Se configura automáticamente un servidor web embebido (por defecto Tomcat) que se puede arrancar con un solo comando.</p>
</li>
<li>
<p>Se habilita el soporte para las anotaciones de Spring MVC y se registran automáticamente los controladores y otros componentes web.</p>
</li>
<li>
<p>Se proporciona una integración con otras tecnologías web como Thymeleaf, JSP o JSF.</p>
</li>
<li>
<p>Se simplifica la seguridad web con la integración de Spring Security y Azure Active Directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>El paquete Spring Web es una forma rápida y sencilla de crear aplicaciones web con Spring Boot sin tener que configurar manualmente muchos aspectos. Puedes encontrar más información sobre el paquete Spring Web en la documentación oficial⁴.</p>
</div>
</div>
<div class="sect2">
<h3 id="_anotaciones_de_spring_web">Anotaciones de Spring Web</h3>
<div class="ulist">
<div class="title">Las principales anotaciones de Spring Web son las siguientes:</div>
<ul>
<li>
<p><strong>@RequestMapping</strong>: Esta anotación marca los métodos controladores dentro de las clases @Controller y se puede configurar usando path, name o value para indicar a qué URL se asigna el método.</p>
</li>
<li>
<p><strong>@GetMapping</strong>, <strong>@PostMapping</strong>, <strong>@PutMapping</strong>, <strong>@DeleteMapping</strong>, <strong>@PatchMapping</strong>: Estas anotaciones son alias de @RequestMapping con diferentes métodos HTTP y se utilizan para asignar métodos controladores a diferentes rutas URL según el tipo de solicitud.</p>
</li>
<li>
<p><strong>@PathVariable</strong>: Esta anotación se utiliza para vincular una parte de la URL a un parámetro del método controlador.</p>
</li>
<li>
<p><strong>@RequestParam</strong>: Esta anotación se utiliza para vincular un parámetro de consulta o un parámetro de formulario a un parámetro del método controlador.</p>
</li>
<li>
<p><strong>@RequestBody</strong>: Esta anotación se utiliza para vincular el cuerpo de la solicitud HTTP a un objeto en el método controlador.</p>
</li>
<li>
<p><strong>@ResponseBody</strong>: Si marcamos un método controlador con @ResponseBody, Spring trata el resultado del método como la respuesta misma y lo convierte al formato adecuado según el tipo de contenido de la solicitud.</p>
</li>
<li>
<p><strong>@ExceptionHandler</strong>: Con esta anotación, podemos declarar un método personalizado para manejar los errores que se produzcan en los métodos controladores y devolver una respuesta adecuada al cliente.</p>
</li>
<li>
<p><strong>@ResponseStatus</strong>: Podemos especificar el estado HTTP deseado de la respuesta si anotamos un método controlador con esta anotación. También podemos usarla junto con @ExceptionHandler para indicar el estado HTTP del error.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplo_de_aplicación_web_con_spring_boot">Ejemplo de aplicación web con Spring Boot</h3>
<div class="listingblock">
<div class="title">Ejemplo de aplicación web con Spring Boot:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SpringBootApplication
public class Aplicacion {

    public static void main(String[] args) {
        SpringApplication.run(Aplicacion.class, args);
    }
}

@Controller
public class Controlador {

    @GetMapping("/")
    public String inicio(Model model) {
        model.addAttribute("saludo", "Hola desde el controlador");
        return "inicio";
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo del uso de la anotación @RequestMapping:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
@RequestMapping("/users")
public class UserController {

    // GET /users -&gt; devuelve una lista de usuarios
    @RequestMapping(method = RequestMethod.GET)
    public String getUsers(Model model) {
        List&lt;User&gt; users = userService.getUsers();
        model.addAttribute("users", users);
        return "users";
    }

    // POST /users -&gt; crea un nuevo usuario
    @RequestMapping(method = RequestMethod.POST)
    public String createUser(@ModelAttribute User user) {
        userService.createUser(user);
        return "redirect:/users";
    }

    // PUT /users/{id} -&gt; actualiza un usuario existente
    @RequestMapping(value = "/{id}", method = RequestMethod.PUT)
    public String updateUser(@PathVariable Long id, @ModelAttribute User user) {
        userService.updateUser(id, user);
        return "redirect:/users";
    }

    // DELETE /users/{id} -&gt; elimina un usuario existente
    @RequestMapping(value = "/{id}", method = RequestMethod.DELETE)
    public String deleteUser(@PathVariable Long id) {
        userService.deleteUser(id);
        return "redirect:/users";
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo del uso de las anotaciones @GetMapping, @PostMapping, @PutMapping y @DeleteMapping:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RestController
@RequestMapping("/users")
public class UserController {

    private List&lt;User&gt; users = new ArrayList&lt;&gt;();

    //Obtener todos los usuarios
    @GetMapping("/")
    public List&lt;User&gt; getUsers() {
        return users;
    }

    //Obtener un usuario por su ID
    @GetMapping("/{id}")
    public User getUserById(@PathVariable int id) {
        return users.stream()
                .filter(user -&gt; user.getId() == id)
                .findFirst()
                .orElse(null);
    }

    //Agregar un nuevo usuario
    @PostMapping("/")
    public User addUser(@RequestBody User user) {
        users.add(user);
        return user;
    }

    //Actualizar un usuario existente
    @PutMapping("/{id}")
    public User updateUser(@PathVariable int id, @RequestBody User updatedUser) {
        User user = getUserById(id);
        if (user != null) {
            user.setName(updatedUser.getName());
            user.setEmail(updatedUser.getEmail());
        }
        return user;
    }

    //Eliminar un usuario
    @DeleteMapping("/{id}")
    public User deleteUser(@PathVariable int id) {
        User user = getUserById(id);
        if (user != null) {
            users.remove(user);
        }
        return user;
    }

    //Actualizar parcialmente un usuario
    @PatchMapping("/{id}")
    public User partialUpdateUser(@PathVariable int id, @RequestBody Map&lt;String, Object&gt; updates) {
        User user = getUserById(id);
        if (user != null) {
            updates.forEach((key, value) -&gt; {
                switch (key) {
                    case "name":
                        user.setName((String) value);
                        break;
                    case "email":
                        user.setEmail((String) value);
                        break;
                }
            });
        }
        return user;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validación_de_datos">Validación de datos</h3>
<div class="paragraph">
<p>La validación de datos es un proceso que se utiliza para verificar que los datos de entrada sean correctos y cumplan con los requisitos establecidos. Por ejemplo, si tenemos un formulario de registro de usuarios, podemos usar la validación de datos para verificar que el nombre de usuario no esté vacío, que la contraseña tenga al menos 8 caracteres, que el correo electrónico tenga un formato válido, etc.</p>
</div>
<div class="paragraph">
<p>Spring Boot proporciona una serie de anotaciones que podemos usar para validar los datos de entrada en los métodos controladores. Estas anotaciones se pueden aplicar a los parámetros de los métodos controladores o a los campos de los objetos de modelo.</p>
</div>
<div class="ulist">
<div class="title">Las anotaciones de validación de datos numéricos son:</div>
<ul>
<li>
<p><strong>@NotNull</strong>: El campo no puede ser nulo.</p>
</li>
<li>
<p><strong>@NotEmpty</strong>: El campo no puede ser nulo ni vacío.</p>
</li>
<li>
<p><strong>@NotBlank</strong>: El campo no puede ser nulo ni estar en blanco.</p>
</li>
<li>
<p><strong>@Size</strong>: El campo debe tener un tamaño entre los valores especificados.</p>
</li>
<li>
<p><strong>@Min</strong>: El campo debe tener un valor mayor o igual al especificado.</p>
</li>
<li>
<p><strong>@Max</strong>: El campo debe tener un valor menor o igual al especificado.</p>
</li>
<li>
<p><strong>@Valid</strong>: El campo debe ser válido.</p>
</li>
<li>
<p><strong>@DecimalMax</strong>: El campo debe tener un valor menor o igual al especificado.</p>
</li>
<li>
<p><strong>@DecimalMin</strong>: El campo debe tener un valor mayor o igual al especificado.</p>
</li>
<li>
<p><strong>@Digits</strong>: El campo debe tener un número de dígitos (enteros y decimales) menor o igual al especificado.</p>
</li>
<li>
<p><strong>@Negative</strong>: El campo debe tener un valor negativo.</p>
</li>
<li>
<p><strong>@NegativeOrZero</strong>: El campo debe tener un valor negativo o cero.</p>
</li>
<li>
<p><strong>@Positive</strong>: El campo debe tener un valor positivo.</p>
</li>
<li>
<p><strong>@PositiveOrZero</strong>: El campo debe tener un valor positivo o cero.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Las anotaciones de validación de datos de cadena son:</div>
<ul>
<li>
<p><strong>@Email</strong>: El campo debe tener un formato de correo electrónico válido.</p>
</li>
<li>
<p><strong>@Pattern</strong>: El campo debe coincidir con el patrón especificado.</p>
</li>
<li>
<p><strong>@URL</strong>: El campo debe tener un formato de URL válido.</p>
</li>
<li>
<p><strong>@NotBlank</strong>: El campo no puede ser nulo ni estar en blanco.</p>
</li>
<li>
<p><strong>@NotEmpty</strong>: El campo no puede ser nulo ni vacío.</p>
</li>
<li>
<p><strong>@Size</strong>: El campo debe tener un tamaño entre los valores especificados.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Las anotaciones de validación de datos de fecha son:</div>
<ul>
<li>
<p><strong>@Future</strong>: El campo debe ser una fecha futura.</p>
</li>
<li>
<p><strong>@FutureOrPresent</strong>: El campo debe ser una fecha futura o la fecha actual.</p>
</li>
<li>
<p><strong>@Past</strong>: El campo debe ser una fecha pasada.</p>
</li>
<li>
<p><strong>@PastOrPresent</strong>: El campo debe ser una fecha pasada o la fecha actual.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Las anotaciones de validación de datos de tipo booleano son:</div>
<ul>
<li>
<p><strong>@AssertTrue</strong>: El campo debe ser verdadero.</p>
</li>
<li>
<p><strong>@AssertFalse</strong>: El campo debe ser falso.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de validación de datos con anotaciones:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RestController
@RequestMapping("/users")
public class UserController {

    private List&lt;User&gt; users = new ArrayList&lt;&gt;();

    //Obtener todos los usuarios
    @GetMapping("/")
    public List&lt;User&gt; getUsers() {
        return users;
    }

    //Obtener un usuario por su ID
    @GetMapping("/{id}")
    public User getUserById(@PathVariable int id) {
        return users.stream()
                .filter(user -&gt; user.getId() == id)
                .findFirst()
                .orElse(null);
    }

    //Agregar un nuevo usuario
    @PostMapping("/")
    public User addUser(@RequestBody @Valid User user) {
        users.add(user);
        return user;
    }

    //Actualizar parcialmente un usuario
    @PatchMapping("/{id}")
    public User partialUpdateUser(@PathVariable int id, @RequestBody @Valid Map&lt;String, Object&gt; updates) {
        User user = getUserById(id);
        if (user != null) {
            updates.forEach((key, value) -&gt; {
                switch (key) {
                    case "name":
                        user.setName((String) value);
                        break;
                    case "email":
                        user.setEmail((String) value);
                        break;
                }
            });
        }
        return user;
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Donde User.java es:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class User {

    private int id;
    @NotBlank
    private String name;
    @Email
    private String email;

    //Constructores, getters y setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de Entity con muchas de las anotaciones de validación de datos que se pueden usar:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@Table(name = "users")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;

    @NotBlank
    @Size(min = 3, max = 50)
    private String name;

    @NotBlank
    @Size(min = 3, max = 50)
    @Email
    private String email;

    @NotBlank
    @Size(min = 8, max = 100)
    private String password;

    @NotNull
    @Min(18)
    @Max(100)
    private int age;

    @NotNull
    @PastOrPresent
    private LocalDate birthDate;

    @NotNull
    @AssertTrue
    private boolean terms;

    //Constructores, getters y setters
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manejo_de_errores">Manejo de errores</h3>
<div class="paragraph">
<p>Cuando se produce un error en la aplicación, Spring Boot devuelve una respuesta HTTP con un código de estado de error y un mensaje de error. Por ejemplo, si intentamos obtener un usuario que no existe, Spring Boot devuelve una respuesta HTTP con el código de estado 404 (Not Found) y el mensaje de error "User not found".</p>
</div>
<div class="ulist">
<div class="title">Tenemos dos opciones para manejar los errores:</div>
<ul>
<li>
<p><strong>Manejo de errores con @ExceptionHandler</strong></p>
</li>
<li>
<p><strong>Manejo de errores con ResponseEntity</strong></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_manejo_de_errores_con_exceptionhandler">Manejo de errores con @ExceptionHandler</h4>
<div class="paragraph">
<p>@ExceptionHandler en Spring es una anotación que nos permite manejar excepciones específicas que se lanzan en un controlador de Spring. Esta anotación se utiliza para capturar excepciones específicas y proporcionar una respuesta personalizada al cliente, en lugar de simplemente lanzar la excepción y mostrar el mensaje de error predeterminado.</p>
</div>
<div class="paragraph">
<p>Podemos la anotación @ControllerAdvice para crear un manejador de excepciones global para nuestra aplicación. Dentro de este manejador, podemos crear un método que se ejecutará cuando se produzca una excepción de tipo 'MiExcepcion'.</p>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de manejo de errores:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ControllerAdvice
public class ManejadorExcepciones {

    @ExceptionHandler(MiExcepcion.class)
    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
    @ResponseBody
    public String manejarMiExcepcion(MiExcepcion ex) {
        return "Ocurrió un error al procesar la solicitud: " + ex.getMessage();
    }
}

@Controller
@RequestMapping("/users")
public class UserController {

    //Obtener un usuario por su ID
    @GetMapping("/{id}")
    public User getUserById(@PathVariable int id) {
        if (id == 1) {
            throw new MiExcepcion("El usuario con ID 1 no existe");
        }
        return users.stream()
                .filter(user -&gt; user.getId() == id)
                .findFirst()
                .orElse(null);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_manejo_de_errores_con_responseentity">Manejo de errores con ResponseEntity</h4>
<div class="paragraph">
<p>ResponseEntity en Spring es una clase que representa la respuesta HTTP que se envía al cliente. Esta clase es muy útil cuando queremos personalizar la respuesta que se envía al cliente, ya que nos permite configurar el código de estado HTTP, las cabeceras y el cuerpo de la respuesta.</p>
</div>
<div class="paragraph">
<p>La forma más común de utilizar ResponseEntity es devolverla desde un controlador de Spring. Por ejemplo, supongamos que tenemos un controlador que recibe una solicitud HTTP POST para crear un nuevo recurso. Si la solicitud es válida, el controlador crea el recurso y devuelve una respuesta HTTP con el código de estado 201 (Created) y el recurso creado en el cuerpo de la respuesta. Si la solicitud no es válida, el controlador devuelve una respuesta HTTP con el código de estado 400 (Bad Request) y el mensaje de error en el cuerpo de la respuesta.</p>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de manejo de errores:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.*;

import javax.validation.Valid;

@RestController
@RequestMapping("/api")
public class EjemploController {

    @PostMapping("/ejemplo")
    public ResponseEntity&lt;String&gt; crearEjemplo(@Valid @RequestBody EjemploDto ejemploDto, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            String mensajeError = bindingResult.getFieldErrors().stream()
                    .map(error -&gt; error.getField() + " " + error.getDefaultMessage())
                    .reduce("", (acumulado, mensaje) -&gt; acumulado + mensaje + ", ");
            mensajeError = mensajeError.substring(0, mensajeError.length() - 2); // eliminamos la última coma y el espacio
            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body("Error de validación: " + mensajeError);
        }

        // Código para guardar el ejemplo en la base de datos o realizar cualquier otra operación

        return ResponseEntity.status(HttpStatus.CREATED).body("Ejemplo creado con éxito");
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_data">Spring Data</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_visión_general_de_spring_data">Visión general de Spring Data</h3>
<div class="paragraph">
<p>Spring Data es un subproyecto de Spring Framework que proporciona un conjunto de bibliotecas y herramientas para simplificar el acceso a los datos de diferentes tipos de bases de datos, como bases de datos relacionales y no relacionales.</p>
</div>
<div class="paragraph">
<p>El objetivo principal de Spring Data es abstraer la complejidad del acceso a los datos y proporcionar una API coherente y fácil de usar para interactuar con diferentes bases de datos. Esto significa que los desarrolladores pueden concentrarse en la lógica de negocio en lugar de preocuparse por cómo acceder a los datos.</p>
</div>
<div class="paragraph">
<p>Spring Data proporciona una amplia gama de funcionalidades, desde la creación de repositorios que permiten realizar operaciones CRUD (crear, leer, actualizar y eliminar) de forma rápida y fácil, hasta la implementación de consultas complejas con lenguajes específicos de la base de datos.</p>
</div>
<div class="paragraph">
<p>Además, Spring Data es altamente personalizable y extensible, lo que significa que puedes adaptarlo a tus necesidades específicas. Por ejemplo, puedes agregar tus propios métodos de consulta personalizados o usar tus propias anotaciones para mapear tus entidades de dominio a la base de datos.</p>
</div>
<div class="paragraph">
<p>En resumen, Spring Data es una herramienta muy útil para simplificar el acceso a los datos en aplicaciones de Spring. Al utilizar Spring Data, puedes escribir menos código, reducir la complejidad y aumentar la productividad.</p>
</div>
<div class="ulist">
<div class="title">Tipos de acceso a los datos en Spring Data</div>
<ul>
<li>
<p><strong>JPA</strong>: Java Persistence API (JPA) es una especificación de Java que define cómo acceder a los datos de una base de datos relacional. JPA se utiliza para mapear objetos Java a tablas de una base de datos relacionales y viceversa. JPA proporciona una API para realizar operaciones CRUD (crear, leer, actualizar y eliminar) en una base de datos relacionales.</p>
</li>
<li>
<p><strong>JPQL</strong>: Java Persistence Query Language (JPQL) es un lenguaje de consulta orientado a objetos que se utiliza para realizar consultas en bases de datos relacionales. JPQL es similar a SQL, pero está orientado a objetos y utiliza nombres de clases y atributos en lugar de nombres de tablas y columnas. JPQL se utiliza para realizar consultas en bases de datos relacionales que utilizan el estándar JPA (Java Persistence API) para el mapeo objeto-relacional (ORM).</p>
</li>
<li>
<p><strong>Criteria API</strong>: Criteria Query es una API de Java que se utiliza para construir consultas de forma programática. Criteria Query es una alternativa a JPQL que permite construir consultas de forma dinámica y flexible.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_anotaciones_de_spring_data">Anotaciones de Spring Data</h3>
<div class="ulist">
<div class="title">Las anotaciones de Spring Data:</div>
<ul>
<li>
<p>@Repository: Anota una clase que proporciona el mecanismo de persistencia para trabajar con una base de datos. Esta anotación es opcional, pero se recomienda su uso para facilitar la inyección de dependencias y la transparencia transaccional.</p>
</li>
<li>
<p>@Table: Anota una clase que representa una tabla en una base de datos relacional. Esta anotación es utilizada por el ORM (Object-Relational Mapping) para mapear los objetos Java a las tablas de la base de datos.</p>
</li>
<li>
<p>@Entity: Anota una clase que representa una tabla en una base de datos relacional. Esta anotación es utilizada por el ORM (Object-Relational Mapping) para mapear los objetos Java a las tablas de la base de datos.</p>
</li>
<li>
<p>@Id: Anota el atributo que se utilizará como clave primaria en una tabla de base de datos. Esta anotación es necesaria para que el ORM pueda identificar los registros de la tabla.</p>
</li>
<li>
<p>@GeneratedValue: Anota el atributo que será generado automáticamente por la base de datos cuando se inserte un nuevo registro. Esta anotación se utiliza en combinación con @Id.</p>
</li>
<li>
<p>@Column: Anota un atributo que representa una columna en una tabla de base de datos. Esta anotación es utilizada por el ORM para mapear los atributos de la clase a las columnas de la tabla.</p>
</li>
<li>
<p>@Transient: Anota un atributo que no se debe mapear a una columna en la tabla de base de datos. Esta anotación se utiliza en combinación con @Column.</p>
</li>
<li>
<p>@Transactional: Anota un método o una clase que ejecuta operaciones transaccionales. Esta anotación asegura que todas las operaciones en el método o la clase se ejecuten en una única transacción.</p>
</li>
<li>
<p>@Query: Anota un método que ejecuta una consulta personalizada. Esta anotación se utiliza en combinación con @Modifying para ejecutar consultas de actualización.</p>
</li>
<li>
<p>@Modifying: Anota un método que ejecuta una consulta de actualización. Esta anotación se utiliza en combinación con @Query para ejecutar consultas personalizadas.</p>
</li>
<li>
<p>@Param: Anota un parámetro de un método que ejecuta una consulta personalizada. Esta anotación se utiliza en combinación con @Query para ejecutar consultas personalizadas.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_jpa">JPA</h3>
<div class="paragraph">
<p>Data JPA es una biblioteca o framework de Java que proporciona una abstracción de alto nivel para interactuar con bases de datos relacionales utilizando la tecnología Java Persistence API (JPA). JPA es una especificación de Java EE para el mapeo objeto-relacional (ORM), que permite a los desarrolladores trabajar con bases de datos relacionales utilizando objetos Java en lugar de SQL directamente.</p>
</div>
<div class="paragraph">
<p>Data JPA agrega una capa de abstracción adicional en la parte superior de JPA para facilitar la interacción con las bases de datos y reducir la cantidad de código que se debe escribir para realizar operaciones de base de datos. Proporciona características como la creación automática de consultas a partir de métodos de repositorio, la gestión de transacciones y la especificación de consultas personalizadas.</p>
</div>
<div class="paragraph">
<p>Data JPA se puede utilizar en combinación con cualquier implementación de JPA, como Hibernate o EclipseLink, y es compatible con una variedad de bases de datos relacionales como MySQL, PostgreSQL, Oracle y SQL Server, entre otras.</p>
</div>
<div class="sect3">
<h4 id="_realizar_consultas_con_jpa">Realizar consultas con JPA</h4>
<div class="paragraph">
<p>Para realizar consultas con JPA, debes crear una interfaz que extienda la interfaz CrudRepository. Esta interfaz proporciona una serie de métodos para realizar operaciones CRUD (crear, leer, actualizar y eliminar) en una base de datos.</p>
</div>
<div class="ulist">
<div class="title">Los métodos de la interfaz CrudRepository:</div>
<ul>
<li>
<p><strong>save</strong>: Este método se utiliza para guardar un objeto en la base de datos. Si el objeto ya existe en la base de datos, se actualizará. Si el objeto no existe en la base de datos, se creará un nuevo registro.</p>
</li>
<li>
<p><strong>findById</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando su clave primaria.</p>
</li>
<li>
<p><strong>findAll</strong>: Este método se utiliza para recuperar todos los objetos de una tabla.</p>
</li>
<li>
<p><strong>deleteById</strong>: Este método se utiliza para eliminar un objeto de la base de datos utilizando su clave primaria.</p>
</li>
<li>
<p><strong>delete</strong>: Este método se utiliza para eliminar un objeto de la base de datos.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Los métodos de búsqueda personalizados:</div>
<ul>
<li>
<p><strong>findByNombre</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre.</p>
</li>
<li>
<p><strong>findByNombreAndApellido</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y apellido.</p>
</li>
<li>
<p><strong>findByNombreOrApellido</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre o apellido.</p>
</li>
<li>
<p><strong>findByNombreOrderByApellido</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y ordenar los resultados por el atributo apellido.</p>
</li>
<li>
<p><strong>findByNombreNot</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y excluyendo los resultados que coincidan con el atributo nombre.</p>
</li>
<li>
<p><strong>findByNombreLike</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y buscando los resultados que coincidan con el atributo nombre.</p>
</li>
<li>
<p><strong>findByNombreStartingWith</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y buscando los resultados que coincidan con el atributo nombre al comienzo de la cadena.</p>
</li>
<li>
<p><strong>findByNombreEndingWith</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y buscando los resultados que coincidan con el atributo nombre al final de la cadena.</p>
</li>
<li>
<p><strong>findByNombreContaining</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y buscando los resultados que coincidan con el atributo nombre en cualquier parte de la cadena.</p>
</li>
<li>
<p><strong>findByNombreIn</strong>: Este método se utiliza para buscar un objeto en la base de datos utilizando el atributo nombre y buscando los resultados que coincidan con el atributo nombre en una lista de valores.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Para implementar consultas con JPA:</div>
<ul>
<li>
<p>Crea una interfaz que extienda la interfaz JpaRepository.</p>
</li>
<li>
<p>Anota la interfaz con @Repository para indicar que es un repositorio.</p>
</li>
<li>
<p>Crea un método que devuelva un objeto de la entidad que se desea buscar.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Definiendo un interfaz de repositorio con varios métodos de búsqueda personalizados:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Repository
public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    User findByEmail(String email);
    User findByEmailAndName(String email, String name);
    User findByEmailOrName(String email, String name);
    User findByEmailOrderByLastName(String email);
    User findByEmailNot(String email);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">La clase del servicio:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;

    public User findByEmail(String email) {
        return userRepository.findByEmail(email);
    }

    @Transactional
    public addUser(User user) {
        userRepository.save(user);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jpql">JPQL</h3>
<div class="paragraph">
<p>las consultas JPQL permiten realizar peticiones orientadas a objetos en una base de datos relacional utilizando JPA. A diferencia de SQL, las consultas JPQL se realizan sobre entidades y sus atributos, lo que permite a los desarrolladores trabajar con objetos Java directamente.</p>
</div>
<div class="ulist">
<div class="title">Aquí hay algunos conceptos clave a tener en cuenta al trabajar con consultas JPQL:</div>
<ul>
<li>
<p><strong>Entidades</strong>: Las entidades son clases Java que representan tablas de base de datos. Las consultas JPQL se realizan sobre entidades.</p>
</li>
<li>
<p><strong>Atributos</strong>: Los atributos son variables dentro de una entidad que representan columnas en la base de datos.
*Clausulas: Las cláusulas son palabras clave utilizadas en una consulta para definir lo que se busca. Las cláusulas comunes incluyen SELECT, FROM, WHERE, ORDER BY, y GROUP BY.</p>
</li>
<li>
<p><strong>Parámetros</strong>: Los parámetros se utilizan para proporcionar valores dinámicos a las consultas. Los parámetros se indican en la consulta utilizando la sintaxis ":" seguida del nombre del parámetro.</p>
</li>
<li>
<p><strong>Funciones</strong>: Las funciones son expresiones que se aplican a los atributos de las entidades para realizar cálculos o manipulaciones de datos. Las funciones comunes incluyen AVG, MAX, MIN, COUNT, y SUM.</p>
</li>
<li>
<p><strong>Resultados</strong>: Los resultados de las consultas JPQL son objetos Java que se pueden utilizar en el código de la aplicación.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Las anotaciones de JPQL:</div>
<ul>
<li>
<p><strong>@Query</strong>: Anota un método de un repositorio para indicar que se debe ejecutar una consulta JPQL. Esta anotación se utiliza para definir consultas JPQL personalizadas.</p>
</li>
<li>
<p><strong>@Param</strong>: Anota un parámetro de un método de un repositorio para indicar que se debe utilizar como parámetro en una consulta JPQL. Esta anotación se utiliza para definir consultas JPQL personalizadas.</p>
</li>
<li>
<p><strong>@Modifying</strong>: Anota un método de un repositorio para indicar que se debe ejecutar una consulta JPQL que modifica los datos. Esta anotación se utiliza para definir consultas JPQL personalizadas.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Ejemplo de consulta JPQL:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface ProductoRepository extends JpaRepository&lt;Producto, Long&gt; {
    @Query("SELECT p FROM Producto p WHERE p.precio &gt; :precio")
    List&lt;Producto&gt; buscarPorPrecioMayorQue(@Param("precio") Double precio);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de consulta JPQL con @Modifying:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface ProductoRepository extends JpaRepository&lt;Producto, Long&gt; {
    @Modifying
    @Query("UPDATE Producto p SET p.precio = :precio WHERE p.id = :id")
    void actualizar(@Param("id") Long id, @Param("precio") Double precio);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de un servicio que utiliza un repositorio para realizar consultas JPQL:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class ProductoService {
    @Autowired
    private ProductoRepository productoRepository;

    public List&lt;Producto&gt; buscarPorPrecioMayorQue(Double precio) {
        return productoRepository.buscarPorPrecioMayorQue(precio);
    }

    @Transactional
    public void actualizarPrecio(Long id, Double precio) {
        productoRepository.actualizar(id, precio);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_criteria_api">Criteria API</h3>
<div class="paragraph">
<p>La API de Criteria es una API de bajo nivel que se utiliza para construir consultas programáticamente. La API de Criteria se utiliza a menudo para construir consultas dinámicas que pueden cambiar en tiempo de ejecución.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hibernate">Hibernate</h3>
<div class="paragraph">
<p>Hibernate es un framework de mapeo objeto-relacional (ORM) que se utiliza comúnmente en aplicaciones de Java. Es una implementación de la especificación Java Persistence API (JPA) y proporciona una forma de interactuar con bases de datos relacionales utilizando objetos Java.</p>
</div>
<div class="paragraph">
<p>En el contexto de Spring, Hibernate se utiliza a menudo como implementación de JPA para acceder a bases de datos relacionales. Spring proporciona una capa adicional de abstracción sobre JPA y Hibernate, facilitando su integración en una aplicación de Spring.</p>
</div>
<div class="paragraph">
<p>Para utilizar Hibernate con Spring, se debe configurar un EntityManagerFactory, que es una fábrica de objetos EntityManager. EntityManager es una interfaz de JPA que permite realizar operaciones de lectura y escritura en la base de datos utilizando objetos Java.</p>
</div>
<div class="sect3">
<h4 id="_anotaciones_de_hibernate">Anotaciones de Hibernate</h4>
<div class="paragraph">
<p>Hibernate proporciona varias anotaciones que se pueden utilizar para definir las entidades y sus relaciones. Estas anotaciones se utilizan para definir las entidades y sus relaciones en una aplicación de Spring</p>
</div>
<div class="ulist">
<div class="title">Anotaciones principales de Hibernate:</div>
<ul>
<li>
<p><strong>@Entity</strong>: se utiliza para marcar una clase como entidad persistente, lo que significa que se puede almacenar en una base de datos.</p>
</li>
<li>
<p><strong>@Table</strong>: se utiliza para especificar el nombre de la tabla de la base de datos correspondiente a la entidad.</p>
</li>
<li>
<p><strong>@Id</strong>: se utiliza para marcar el campo que actúa como identificador de la entidad.</p>
</li>
<li>
<p><strong>@GeneratedValue</strong>: se utiliza para especificar cómo se generará el valor del identificador de la entidad.</p>
</li>
<li>
<p><strong>@Column</strong>: se utiliza para especificar el mapeo de un campo de la entidad a una columna de la tabla de la base de datos.</p>
</li>
<li>
<p><strong>@Transient</strong>: se utiliza para marcar un campo de la entidad como no persistente, lo que significa que no se almacenará en la base de datos.</p>
</li>
<li>
<p><strong>@Embeddable</strong>: se utiliza para marcar una clase como incrustable, lo que significa que se puede usar como tipo de campo en otra entidad.</p>
</li>
<li>
<p><strong>@Embedded</strong>: se utiliza para especificar un campo incrustado en una entidad.</p>
</li>
<li>
<p><strong>@Temporal</strong>: se utiliza para especificar el tipo de fecha o hora que se almacenará en una columna de la base de datos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de @Embeddable y @Embedded:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "first_name")
    private String firstName;

    @Column(name = "last_name")
    private String lastName;

    @Embedded
    private Address address;

    // Getters and setters
}

@Embeddable
public class Address {
    @Column(name = "street")
    private String street;

    @Column(name = "city")
    private String city;

    @Column(name = "state")
    private String state;

    @Column(name = "zip_code")
    private String zipCode;

    // Getters and setters
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Para establecer relaciones entre entidades en Spring con Hibernate, se utilizan las siguientes anotaciones:</div>
<ul>
<li>
<p><strong>@OneToOne</strong>: Esta anotación se utiliza para establecer una relación uno-a-uno entre dos entidades. Se utiliza para indicar que una entidad tiene una relación con otra entidad de forma que una instancia de una entidad sólo puede estar asociada con una única instancia de la otra entidad.</p>
</li>
<li>
<p><strong>@OneToMany</strong>: Esta anotación se utiliza para establecer una relación uno-a-muchos entre dos entidades. Se utiliza para indicar que una entidad tiene una colección de instancias de otra entidad.</p>
</li>
<li>
<p><strong>@ManyToOne</strong>: Esta anotación se utiliza para establecer una relación muchos-a-uno entre dos entidades. Se utiliza para indicar que varias instancias de una entidad pueden estar asociadas con una única instancia de otra entidad.</p>
</li>
<li>
<p><strong>@ManyToMany</strong>: Esta anotación se utiliza para establecer una relación muchos-a-muchos entre dos entidades. Se utiliza para indicar que varias instancias de una entidad pueden estar asociadas con varias instancias de otra entidad.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cada una de estas anotaciones se utiliza en combinación con otras anotaciones de Hibernate, como <strong>@JoinColumn</strong>, <strong>@JoinTable</strong> o <strong>@MappedBy</strong> , para especificar la forma en que se deben mapear las relaciones entre las entidades.</p>
</div>
<div class="listingblock">
<div class="title">Ejemplo de uso de @OneToOne:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Producto {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    @Column(name = "price")
    private Double precio;

    @OneToOne
    @JoinColumn(name = "category_id")
    private Categoria categoria;

    // constructor, getters y setters
}

@Entity
public class Categoria {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    // constructor, getters y setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de uso de @OneToMany:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Producto {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    @Column(name = "price")
    private Double precio;

    @OneToMany(mappedBy = "producto")
    private List&lt;DetallePedido&gt; detallesPedido;

    // constructor, getters y setters
}

@Entity
public class DetallePedido {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "quantity")
    private Integer cantidad;

    @ManyToOne
    @JoinColumn(name = "product_id")
    private Producto producto;

    @ManyToOne
    @JoinColumn(name = "order_id")
    private Pedido pedido;

    // constructor, getters y setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de uso de @ManyToOne:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Producto {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    @Column(name = "price")
    private Double precio;

    @ManyToOne
    @JoinColumn(name = "category_id")
    private Categoria categoria;

    // constructor, getters y setters
}

@Entity
public class Categoria {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    @OneToMany(mappedBy = "categoria")
    private List&lt;Producto&gt; productos;

    // constructor, getters y setters
}@
@
@</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de uso de @ManyToMany:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Producto {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    @Column(name = "price")
    private Double precio;

    @ManyToMany
    @JoinTable(name = "product_tag",
            joinColumns = @JoinColumn(name = "product_id"),
            inverseJoinColumns = @JoinColumn(name = "tag_id"))
    private List&lt;Etiqueta&gt; etiquetas;

    // constructor, getters y setters
}

@Entity
public class Etiqueta {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @ManyToMany(mappedBy = "etiquetas")
    private List&lt;Producto&gt; productos;

    // constructor, getters y setters
}</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Eager y Lazy Loading</div>
<p>Hibernate utiliza dos estrategias de carga de entidades relacionadas: <strong>eager loading</strong> y <strong>lazy loading</strong>.</p>
</div>
<div class="paragraph">
<div class="title">Eager loading</div>
<p>Cuando se utiliza eager loading, Hibernate carga todas las entidades relacionadas de forma inmediata. Por ejemplo, si se tiene una entidad <strong>Producto</strong> que tiene una relación con la entidad <strong>Categoria</strong> , al obtener una instancia de <strong>Producto</strong> , Hibernate también obtiene una instancia de <strong>Categoria</strong> .</p>
</div>
<div class="paragraph">
<div class="title">Lazy loading</div>
<p>Cuando se utiliza lazy loading, Hibernate carga las entidades relacionadas de forma perezosa. Por ejemplo, si se tiene una entidad <strong>Producto</strong> que tiene una relación con la entidad <strong>Categoria</strong> , al obtener una instancia de <strong>Producto</strong> , Hibernate no obtiene una instancia de <strong>Categoria</strong> . En su lugar, Hibernate crea un proxy de <strong>Categoria</strong> que se utiliza para acceder a la instancia de <strong>Categoria</strong> cuando se necesite.</p>
</div>
<div class="paragraph">
<p>El modo en que se especifica la estrategia de carga de entidades relacionadas depende de la anotación que se utilice para establecer la relación entre las entidades.</p>
</div>
<div class="listingblock">
<div class="title">Ejemplo de uso de eager loading con @OneToOne:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Producto {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    @Column(name = "price")
    private Double precio;

    @OneToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "category_id")
    private Categoria categoria;

    @OneToMany(mappedBy = "producto", fetch = FetchType.LAZY)
    private List&lt;DetallePedido&gt; detallesPedido;

    // constructor, getters y setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de aplicación con Spring Data:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class Producto {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "name")
    private String nombre;

    @Column(name = "description")
    private String descripcion;

    @Column(name = "price")
    private Double precio;

    @CreatedDate
    private LocalDateTime fechaCreacion;

    @LastModifiedDate
    private LocalDateTime fechaModificacion;

    // constructor, getters y setters
}

@Repository
public interface ProductoRepository extends JpaRepository&lt;Producto, Long&gt; {
    @Query("SELECT p FROM Producto p WHERE p.precio &gt; :precio")
    List&lt;Producto&gt; buscarPorPrecioMayorQue(@Param("precio") Double precio);

    @Modifying
    @Query("UPDATE Producto p SET p.precio = :precio WHERE p.id = :id")
    void actualizarPrecioPorId(@Param("id") Long id, @Param("precio") Double precio);
}

@Service
public class ProductoService {
    @Autowired
    private ProductoRepository productoRepository;

    @Transactional
    public void actualizarPrecioPorId(Long id, Double precio) {
        productoRepository.actualizarPrecioPorId(id, precio);
    }

    public List&lt;Producto&gt; buscarPorPrecioMayorQue(Double precio) {
        return productoRepository.buscarPorPrecioMayorQue(precio);
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Listado de anotaciones de Spring Data:</div>
<ul>
<li>
<p><strong>@Entity</strong>: Indica que una clase es una entidad que se mapeará a una tabla en la base de datos.</p>
</li>
<li>
<p><strong>@Table</strong>: Especifica la tabla de la base de datos a la que se asigna una entidad.</p>
</li>
<li>
<p><strong>@Id</strong>: Indica la propiedad que actúa como clave primaria de la entidad.</p>
</li>
<li>
<p><strong>@GeneratedValue</strong>: Especifica cómo se generará el valor de la clave primaria.</p>
</li>
<li>
<p><strong>@Column</strong>: Permite especificar propiedades de una columna de base de datos, como su nombre, tipo, longitud, etc.</p>
</li>
<li>
<p><strong>@Temporal</strong>: Indica que una propiedad de fecha y hora debe ser mapeada a una columna de fecha y hora de la base de datos.</p>
</li>
<li>
<p><strong>@Basic</strong>: Indica que una propiedad se mapeará directamente a una columna de base de datos.</p>
</li>
<li>
<p><strong>@Lob</strong>: Indica que una propiedad es un objeto binario grande y se mapeará a un tipo LOB en la base de datos.</p>
</li>
<li>
<p><strong>@Transient</strong>: Indica que una propiedad no se debe mapear a la base de datos.</p>
</li>
<li>
<p><strong>@OneToMany</strong>: Define una relación de uno a muchos entre dos entidades.</p>
</li>
<li>
<p><strong>@ManyToOne</strong>: Define una relación de muchos a uno entre dos entidades.</p>
</li>
<li>
<p><strong>@OneToOne</strong>: Define una relación de uno a uno entre dos entidades.</p>
</li>
<li>
<p><strong>@JoinColumn</strong>: Indica la columna de la tabla que se utilizará como clave externa en una relación.</p>
</li>
<li>
<p><strong>@JoinTable</strong>: Define una tabla de unión para una relación entre dos entidades.</p>
</li>
<li>
<p><strong>@Embedded</strong>: Especifica una propiedad que contiene una entidad embebida.</p>
</li>
<li>
<p><strong>@ElementCollection</strong>: Indica que una propiedad es una colección de elementos básicos o embebidos.</p>
</li>
<li>
<p><strong>@OrderBy</strong>: Especifica el orden en que se ordenarán los elementos de una colección.</p>
</li>
<li>
<p><strong>@NamedQueries</strong>: Agrupa varias @NamedQuery en una sola anotación.</p>
</li>
<li>
<p><strong>@NamedQuery</strong>: Define una consulta con nombre.</p>
</li>
<li>
<p><strong>@SqlResultSetMapping</strong>: Especifica cómo se deben asignar los resultados de una consulta nativa a objetos Java.</p>
</li>
<li>
<p><strong>@StoredProcedureParameter</strong>: Especifica un parámetro de procedimiento almacenado.</p>
</li>
<li>
<p><strong>@NamedStoredProcedureQuery</strong>: Define un procedimiento almacenado con nombre.</p>
</li>
<li>
<p><strong>@SequenceGenerator</strong>: Define un generador de secuencia para una clave primaria.</p>
</li>
<li>
<p><strong>@TableGenerator</strong>: Define un generador de tabla para una clave primaria.</p>
</li>
<li>
<p><strong>@Cacheable</strong>: Indica que una entidad debe ser almacenada en caché.</p>
</li>
<li>
<p><strong>@Cache</strong>: Especifica las propiedades de la caché de una entidad.</p>
</li>
<li>
<p><strong>@org</strong>.hibernate.annotations.CacheConcurrencyStrategy: Define la estrategia de concurrencia utilizada para la caché de una entidad.</p>
</li>
<li>
<p><strong>@org</strong>.hibernate.annotations.CacheMode: Define el modo de caché utilizado para una entidad.</p>
</li>
<li>
<p><strong>@org</strong>.hibernate.annotations.CacheRegion: Indica la región de caché de una entidad.</p>
</li>
<li>
<p><strong>@NaturalId</strong>: Indica que una propiedad es un identificador natural.</p>
</li>
<li>
<p><strong>@Formula</strong>: Especifica una fórmula SQL que se utilizará para calcular el valor de una propiedad.</p>
</li>
<li>
<p><strong>@Where</strong>: Define una cláusula WHERE que se utilizará para filtrar las filas de la tabla.</p>
</li>
<li>
<p><strong>@Filter</strong>: Define un filtro de Hibernate que se puede aplicar a una entidad o una colección.</p>
</li>
<li>
<p><strong>@Filters</strong>: Agrupa varios @Filter en una sola anotación.</p>
</li>
<li>
<p><strong>@DynamicUpdate</strong>: Indica que Hibernate debe generar una actualización SQL dinámica para una entidad, que solo incluye columnas modificadas.</p>
</li>
<li>
<p><strong>@DynamicInsert</strong>: Indica que Hibernate debe generar una instrucción INSERT SQL dinámica para una entidad, que solo incluye columnas no nulas.</p>
</li>
<li>
<p><strong>@Immutable</strong>: Indica que una entidad es inmutable y que las instancias de la entidad nunca cambian.</p>
</li>
<li>
<p><strong>@BatchSize</strong>: Especifica el tamaño de lote que Hibernate utilizará al cargar una colección de entidades relacionadas.</p>
</li>
<li>
<p><strong>@Loader</strong>: Especifica un cargador personalizado que se utilizará para cargar una entidad o colección.</p>
</li>
<li>
<p><strong>@LazyCollection</strong>: Especifica el tipo de carga perezosa que se utilizará para cargar una colección.</p>
</li>
<li>
<p><strong>@LazyToOne</strong>: Especifica el tipo de carga perezosa que se utilizará para cargar una entidad relacionada.</p>
</li>
<li>
<p><strong>@Proxy</strong>: Indica que una entidad se debe cargar de forma diferida y se debe usar un objeto proxy para acceder a ella.</p>
</li>
<li>
<p><strong>@NotFound</strong>: Especifica lo que debe hacer Hibernate cuando no se puede encontrar una entidad relacionada.</p>
</li>
<li>
<p><strong>@BatchFetch</strong>: Especifica cómo Hibernate debe cargar las entidades relacionadas cuando se utiliza una estrategia de carga de lotes.</p>
</li>
<li>
<p><strong>@Fetch</strong>: Especifica cómo Hibernate debe cargar las entidades relacionadas cuando se utiliza una estrategia de carga de inmediato.</p>
</li>
<li>
<p><strong>@Cascade</strong>: Especifica cómo Hibernate debe propagar las operaciones de persistencia desde una entidad principal a las entidades relacionadas.</p>
</li>
<li>
<p><strong>@DynamicInsert</strong>: Indica que Hibernate debe generar una instrucción INSERT SQL dinámica para una entidad, que solo incluye columnas no nulas.</p>
</li>
<li>
<p><strong>@DynamicUpdate</strong>: Indica que Hibernate debe generar una actualización SQL dinámica para una entidad, que solo incluye columnas modificadas.</p>
</li>
<li>
<p><strong>@SelectBeforeUpdate</strong>: Indica que Hibernate debe ejecutar una consulta SELECT antes de actualizar una entidad, para asegurarse de que se hayan realizado cambios.</p>
</li>
<li>
<p><strong>@TypeDef</strong>: Define un tipo de usuario personalizado que se utilizará para mapear una propiedad de entidad.</p>
</li>
<li>
<p><strong>@Type</strong>: Especifica el tipo de usuario personalizado que se utilizará para mapear una propiedad de entidad.</p>
</li>
<li>
<p><strong>@ImmutableType</strong>: Indica que un tipo de usuario personalizado es inmutable.</p>
</li>
<li>
<p><strong>@Parameter</strong>: Especifica un parámetro para un tipo de usuario personalizado.</p>
</li>
<li>
<p><strong>@DiscriminatorColumn</strong>: Especifica la columna de discriminador que se utilizará para distinguir entre diferentes subclases en una jerarquía de herencia.</p>
</li>
<li>
<p><strong>@DiscriminatorValue</strong>: Especifica el valor de discriminador que se utilizará para una subclase.</p>
</li>
<li>
<p><strong>@ForceDiscriminator</strong>: Indica que Hibernate debe forzar la inclusión de la columna de discriminador en las consultas, incluso si no es necesaria para distinguir entre diferentes subclases.</p>
</li>
<li>
<p><strong>@Inheritance</strong>: Indica la estrategia de herencia que se utilizará para una jerarquía de herencia.</p>
</li>
<li>
<p><strong>@Any</strong>: Especifica una propiedad que puede contener cualquier entidad.</p>
</li>
<li>
<p><strong>@ManyToAny</strong>: Define una relación de muchos a cualquiera entre dos entidades.</p>
</li>
<li>
<p><strong>@MapKeyType</strong>: Especifica el tipo de clave para un mapa de entidades.</p>
</li>
<li>
<p><strong>@AnyMetaDef</strong>: Define una estrategia de mapeo para las propiedades de tipo "cualquier" (@Any).</p>
</li>
<li>
<p><strong>@MapKey</strong>: Especifica el nombre de la propiedad que se utilizará como clave para un mapa de entidades.</p>
</li>
<li>
<p><strong>@MapKeyColumn</strong>: Especifica la columna que se utilizará como clave para un mapa de entidades.</p>
</li>
<li>
<p><strong>@MapKeyJoinColumn</strong>: Especifica la columna de unión que se utilizará como clave para un mapa de entidades.</p>
</li>
<li>
<p><strong>@MapKeyJoinColumns</strong>: Especifica varias columnas de unión que se utilizarán como clave para un mapa de entidades.</p>
</li>
<li>
<p><strong>@ManyToMany</strong>: Define una relación de muchos a muchos entre dos entidades.</p>
</li>
<li>
<p><strong>@Fetch</strong>: Especifica cómo Hibernate debe cargar las entidades relacionadas cuando se utiliza una estrategia de carga de inmediato.</p>
</li>
<li>
<p><strong>@FetchMode</strong>: Especifica el modo de carga que se utilizará para cargar una propiedad o colección.</p>
</li>
<li>
<p><strong>@Loader</strong>: Especifica un cargador personalizado que se utilizará para cargar una entidad o colección.</p>
</li>
<li>
<p><strong>@Polymorphism</strong>: Indica si Hibernate debe utilizar una estrategia de discriminador de clase para identificar las subclases en una jerarquía de herencia.</p>
</li>
<li>
<p><strong>@Proxy</strong>: Indica que una entidad se debe cargar de forma diferida y se debe usar un objeto proxy para acceder a ella.</p>
</li>
<li>
<p><strong>@BatchSize</strong>: Especifica el tamaño de lote que Hibernate utilizará al cargar una colección de entidades relacionadas.</p>
</li>
<li>
<p><strong>@Cascade</strong>: Especifica cómo Hibernate debe propagar las operaciones de persistencia desde una entidad principal a las entidades relacionadas.</p>
</li>
<li>
<p><strong>@OptimisticLock</strong>: Indica que una entidad utiliza un mecanismo de bloqueo optimista para evitar conflictos de concurrencia.</p>
</li>
<li>
<p><strong>@Generated</strong>: Indica que una propiedad es generada por la base de datos y no debe ser actualizada por la aplicación.</p>
</li>
<li>
<p><strong>@Source</strong>: Especifica la fuente de la propiedad de entidad.
== Spring MVC</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_visión_general_de_spring_mvc">Visión general de Spring MVC</h3>
<div class="paragraph">
<p>Spring MVC utiliza el patrón de diseño Modelo-Vista-Controlador para separar la lógica de la aplicación en tres componentes: el modelo, la vista y el controlador. El modelo representa los datos y la lógica de la aplicación, la vista es la interfaz de usuario y el controlador maneja las solicitudes HTTP y coordina la interacción entre el modelo y la vista.</p>
</div>
<div class="paragraph">
<p>En Spring MVC, el controlador es responsable de manejar las solicitudes HTTP y de devolver la vista adecuada. El modelo se utiliza para almacenar los datos de la aplicación y la vista se utiliza para mostrar los datos al usuario.</p>
</div>
<div class="paragraph">
<p>Spring MVC es muy popular en el mundo Java y se utiliza en muchas aplicaciones web. Es fácil de usar y ofrece muchas características útiles, como la validación de formularios y la internacionalización.</p>
</div>
</div>
<div class="sect2">
<h3 id="_anotaciones_de_spring_mvc">Anotaciones de Spring MVC</h3>
<div class="ulist">
<div class="title">Las anotaciones de Spring MVC:</div>
<ul>
<li>
<p><strong>@Controller</strong>: Se utiliza para marcar una clase como un controlador en Spring MVC. Los métodos en un controlador marcados con esta anotación manejan las solicitudes HTTP entrantes.</p>
</li>
<li>
<p><strong>@RequestMapping</strong>: Se utiliza para mapear una solicitud HTTP a un método en un controlador. La anotación especifica la URL de la solicitud y el método HTTP que debe manejarla.</p>
</li>
<li>
<p><strong>@PathVariable</strong>: Se utiliza para mapear una parte de una URL a un parámetro de método en un controlador.</p>
</li>
<li>
<p><strong>@RequestParam</strong>: Se utiliza para mapear un parámetro de solicitud HTTP a un parámetro de método en un controlador.</p>
</li>
<li>
<p><strong>@ModelAttribute</strong>: Se utiliza para mapear un objeto Java a un modelo que se utiliza en una vista de Spring MVC.</p>
</li>
<li>
<p><strong>@ResponseBody</strong>: Se utiliza para indicar que un método en un controlador debe devolver el cuerpo de la respuesta HTTP.</p>
</li>
<li>
<p><strong>@ResponseStatus</strong>: Se utiliza para especificar el código de estado HTTP que debe devolver un método en un controlador.</p>
</li>
<li>
<p><strong>@SessionAttribute</strong>: Se utiliza para marcar un atributo como un atributo de sesión en Spring MVC.</p>
</li>
<li>
<p><strong>@InitBinder</strong>: Se utiliza para personalizar el enlace de datos en Spring MVC.</p>
</li>
<li>
<p><strong>@ExceptionHandler</strong>: Se utiliza para manejar excepciones específicas en Spring MVC.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejemplo_de_aplicación_con_spring_mvc">Ejemplo de aplicación con Spring MVC</h3>
<div class="listingblock">
<div class="title">Tenemos una clase que modela una tarea:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Tarea {
    private Long id;
    private String titulo;
    private String descripcion;
    private Boolean completada;

    // constructor, getters y setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Tenemos una interfaz que extiende de JpaRepository para acceder a los datos de la base de datos:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface TareaRepository extends JpaRepository&lt;Tarea, Long&gt; {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Tenemos una clase de servicio que utiliza la interfaz de repositorio para acceder a los datos de la base de datos:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class TareaService {
    @Autowired
    private TareaRepository tareaRepository;

    public List&lt;Tarea&gt; buscarTodas() {
        return tareaRepository.findAll();
    }

    public Tarea buscarPorId(Long id) {
        return tareaRepository.findById(id).orElse(null);
    }

    public void guardar(Tarea tarea) {
        tareaRepository.save(tarea);
    }

    public void eliminar(Long id) {
        tareaRepository.deleteById(id);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Tenemos una clase de controlador que utiliza la clase de servicio para acceder a los datos de la base de datos:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller

public class TareaController {
    @Autowired
    private TareaService tareaService;

    @GetMapping("/")
    public String mostrarTodas(Model model) {
        model.addAttribute("tareas", tareaService.buscarTodas());
        return "index";
    }

    @GetMapping("/nueva")
    public String mostrarFormularioNuevaTarea(Model model) {
        Tarea tarea = new Tarea();
        model.addAttribute("tarea", tarea);
        return "nueva_tarea";
    }

    @PostMapping("/guardar")
    public String guardarTarea(@ModelAttribute("tarea") Tarea tarea) {
        tareaService.guardar(tarea);
        return "redirect:/";
    }

    @GetMapping("/editar/{id}")
    public String mostrarFormularioEditarTarea(@PathVariable(value = "id") Long id, Model model) {
        Tarea tarea = tareaService.buscarPorId(id);
        model.addAttribute("tarea", tarea);
        return "editar_tarea";
    }

    @GetMapping("/eliminar/{id}")
    public String eliminarTarea(@PathVariable(value = "id") Long id) {
        tareaService.eliminar(id);
        return "redirect:/";
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">nueva_tarea.html:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html lang="en" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Nueva tarea&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;Nueva tarea&lt;/h1&gt;
    &lt;form action="#" th:action="@{/guardar}" th:object="${tarea}" method="post"&gt;
        &lt;label for="titulo"&gt;Título&lt;/label&gt;
        &lt;input type="text" id="titulo" th:field="*{titulo}"/&gt;
        &lt;br/&gt;
        &lt;label for="descripcion"&gt;Descripción&lt;/label&gt;
        &lt;input type="text" id="descripcion" th:field="*{descripcion}"/&gt;
        &lt;br/&gt;
        &lt;label for="completada"&gt;Completada&lt;/label&gt;
        &lt;input type="checkbox" id="completada" th:field="*{completada}"/&gt;
        &lt;br/&gt;
        &lt;button type="submit"&gt;Guardar&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">editar_tarea.html:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html lang="en" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Editar tarea&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;Editar tarea&lt;/h1&gt;
    &lt;form action="#" th:action="@{/guardar}" th:object="${tarea}" method="post"&gt;
        &lt;label for="titulo"&gt;Título&lt;/label&gt;
        &lt;input type="text" id="titulo" th:field="*{titulo}"/&gt;
        &lt;br/&gt;
        &lt;label for="descripcion"&gt;Descripción&lt;/label&gt;
        &lt;input type="text" id="descripcion" th:field="*{descripcion}"/&gt;
        &lt;br/&gt;
        &lt;label for="completada"&gt;Completada&lt;/label&gt;
        &lt;input type="checkbox" id="completada" th:field="*{completada}"/&gt;
        &lt;br/&gt;
        &lt;button type="submit"&gt;Guardar&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">index.html:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html lang="en" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Lista de tareas&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;Lista de tareas&lt;/h1&gt;
    &lt;table&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;ID&lt;/th&gt;
                &lt;th&gt;Título&lt;/th&gt;
                &lt;th&gt;Descripción&lt;/th&gt;
                &lt;th&gt;Completada&lt;/th&gt;
                &lt;th&gt;Acciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr th:each="tarea : ${tareas}"&gt;
                &lt;td th:text="${tarea.id}"&gt;&lt;/td&gt;
                &lt;td th:text="${tarea.titulo}"&gt;&lt;/td&gt;
                &lt;td th:text="${tarea.descripcion}"&gt;&lt;/td&gt;
                &lt;td th:text="${tarea.completada}"&gt;&lt;/td&gt;
                &lt;td&gt;
                    &lt;a th:href="@{/editar/{id}(id=${tarea.id})}"&gt;Editar&lt;/a&gt;
                    &lt;a th:href="@{/eliminar/{id}(id=${tarea.id})}"&gt;Eliminar&lt;/a&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;a th:href="@{/nueva}"&gt;Nueva tarea&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_dispatcherservlet">DispatcherServlet</h4>
<div class="paragraph">
<p>DispatcherServlet actúa como un controlador frontal que maneja todas las solicitudes entrantes y las dirige a los controladores apropiados para que se procesen. También es responsable de manejar la mayoría de las tareas de procesamiento de solicitudes, como la selección del controlador adecuado y la invocación del método de controlador correspondiente para procesar la solicitud.</p>
</div>
<div class="paragraph">
<p>DispatcherServlet se configura automáticamente y se inyecta en la aplicación como un bean de Spring. Además, Spring Boot proporciona una serie de anotaciones y convenciones por defecto para simplificar aún más la configuración de la aplicación y permitir que los desarrolladores se centren en escribir la lógica de negocios de la aplicación en lugar de preocuparse por la configuración del servidor web.</p>
</div>
</div>
<div class="sect3">
<h4 id="_anotaciones_de_dispatcherservlet">Anotaciones de DispatcherServlet</h4>
<div class="ulist">
<div class="title">Las anotaciones de DispatcherServlet:</div>
<ul>
<li>
<p><strong>@Controller</strong>: especifica una clase como un controlador de Spring MVC.</p>
</li>
<li>
<p><strong>@RestController</strong>: especifica una clase como un controlador de Spring MVC que devuelve objetos JSON o XML.</p>
</li>
<li>
<p><strong>@RequestMapping</strong>: mapea solicitudes HTTP a métodos de controlador específicos.</p>
</li>
<li>
<p><strong>@GetMapping</strong>: mapea solicitudes HTTP GET a métodos de controlador específicos.</p>
</li>
<li>
<p><strong>@PostMapping</strong>: mapea solicitudes HTTP POST a métodos de controlador específicos.</p>
</li>
<li>
<p><strong>@PutMapping</strong>: mapea solicitudes HTTP PUT a métodos de controlador específicos.</p>
</li>
<li>
<p><strong>@DeleteMapping</strong>: mapea solicitudes HTTP DELETE a métodos de controlador específicos.</p>
</li>
<li>
<p><strong>@PatchMapping</strong>: mapea solicitudes HTTP PATCH a métodos de controlador específicos.</p>
</li>
<li>
<p><strong>@RequestBody</strong>: indica que un parámetro de método de controlador debe estar vinculado al cuerpo de la solicitud HTTP.</p>
</li>
<li>
<p><strong>@ResponseBody</strong>: indica que el valor de retorno de un método de controlador debe estar vinculado al cuerpo de la respuesta HTTP.</p>
</li>
<li>
<p><strong>@PathVariable</strong>: indica que un parámetro de método de controlador debe estar vinculado a una variable de plantilla de URI.</p>
</li>
<li>
<p><strong>@RequestParam</strong>: indica que un parámetro de método de controlador debe estar vinculado a un parámetro de consulta de solicitud HTTP.</p>
</li>
<li>
<p><strong>@RequestHeader</strong>: indica que un parámetro de método de controlador debe estar vinculado a una cabecera de solicitud HTTP.</p>
</li>
<li>
<p><strong>@CookieValue</strong>: indica que un parámetro de método de controlador debe estar vinculado a un valor de cookie de solicitud HTTP.</p>
</li>
<li>
<p><strong>@ModelAttribute</strong>: indica que un parámetro de método de controlador debe estar vinculado a un atributo de modelo.</p>
</li>
<li>
<p><strong>@SessionAttribute</strong>: indica que un parámetro de método de controlador debe estar vinculado a un atributo de sesión.</p>
</li>
<li>
<p><strong>@InitBinder</strong>: indica que un método de controlador debe inicializar un objeto WebDataBinder.</p>
</li>
<li>
<p><strong>@ExceptionHandler</strong>: indica que un método de controlador debe manejar una excepción específica.</p>
</li>
<li>
<p><strong>@ResponseStatus</strong>: indica el código de estado de respuesta HTTP que debe establecerse en la respuesta HTTP.</p>
</li>
<li>
<p><strong>@ControllerAdvice</strong>: se utiliza para marcar una clase como un controlador de asesoramiento de Spring MVC.</p>
</li>
<li>
<p><strong>@CrossOrigin</strong>: indica que un controlador de Spring MVC debe admitir solicitudes CORS.</p>
</li>
<li>
<p><strong>@Valid</strong>: indica que un parámetro de método de controlador debe estar vinculado a un objeto de validación de Spring.</p>
</li>
<li>
<p><strong>@Qualifier</strong>: indica que un bean de Spring debe ser inyectado en un campo, propiedad o método de un bean de Spring.</p>
</li>
<li>
<p><strong>@Resource</strong>: indica que un bean de Spring debe ser inyectado en un campo, propiedad o método de un bean de Spring.</p>
</li>
<li>
<p><strong>@Value</strong>: se utiliza para inyectar valores en un campo, propiedad o método de un bean de Spring.</p>
</li>
<li>
<p><strong>@Profile</strong>: indica que un bean de Spring debe estar disponible solo cuando se activa un perfil de Spring.</p>
</li>
<li>
<p><strong>@Transactional</strong>: indica que un método de controlador debe ejecutarse dentro de una transacción de Spring.</p>
</li>
<li>
<p><strong>@Async</strong>: indica que un método de controlador debe ejecutarse de forma asíncrona.</p>
</li>
<li>
<p><strong>@Scheduled</strong>: indica que un método de controlador debe ejecutarse de forma periódica.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_variantes_de_transactional">Variantes de @Transactional</h4>
<div class="paragraph">
<p>Es posible especificar variantes en la anotación @Transactional para controlar el comportamiento de la transacción.</p>
</div>
<div class="ulist">
<div class="title">Las variantes de @Transactional:</div>
<ul>
<li>
<p><strong>Propagation</strong>: especifica cómo se propagará la transacción.</p>
<div class="ulist">
<ul>
<li>
<p><strong>REQUIRED</strong>: Es el comportamiento predeterminado.</p>
<div class="ulist">
<ul>
<li>
<p>Si no hay transacción: crea una nueva.</p>
</li>
<li>
<p>Si hay transacción: la operación se agrega a la transacción activa actualmente.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>SUPPORTS</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Si no hay transacción: ejecuta la operación sin una transacción.</p>
</li>
<li>
<p>Si hay transacción: la operación se agrega a la transacción activa actualmente.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>MANDATORY</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Si no hay transacción: lanza una excepción.</p>
</li>
<li>
<p>Si hay transacción: la operación se agrega a la transacción activa actualmente.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>REQUIRES_NEW</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Si no hay transacción: crea una nueva transacción.</p>
</li>
<li>
<p>Si hay transacción: crea una nueva transacción y suspende la transacción activa actualmente.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>NOT_SUPPORTED</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Si no hay transacción: ejecuta la operación sin una transacción.</p>
</li>
<li>
<p>Si hay transacción: suspende la transacción activa actualmente.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>NEVER</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Si no hay transacción: ejecuta la operación sin una transacción.</p>
</li>
<li>
<p>Si hay transacción: lanza una excepción.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>NESTED</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Si no hay transacción: crea una nueva transacción, se comporta como REQUIRED.</p>
</li>
<li>
<p>Si hay transacción: anida la nueva transacción dentro de la transacción activa actualmente.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Isolation</strong>: especifica el nivel de aislamiento de la transacción.</p>
<div class="ulist">
<ul>
<li>
<p><strong>DEFAULT</strong>: utiliza el nivel de aislamiento predeterminado de la base de datos.</p>
</li>
<li>
<p><strong>READ_UNCOMMITTED</strong>: permite que una transacción lea datos no confirmados de otras transacciones.</p>
</li>
<li>
<p><strong>READ_COMMITTED</strong>: permite que una transacción lea solo datos confirmados de otras transacciones.</p>
</li>
<li>
<p><strong>REPEATABLE_READ</strong>: garantiza que una transacción siempre lea los mismos datos de otras transacciones.</p>
</li>
<li>
<p><strong>SERIALIZABLE</strong>: garantiza que una transacción siempre lea los mismos datos de otras transacciones y que otras transacciones no puedan modificar los datos leídos.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Timeout</strong>: especifica el tiempo de espera de la transacción en segundos.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de la anotación @Transactional con variantes:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Transactional(propagation = Propagation.REQUIRED, isolation = Isolation.DEFAULT, timeout = 10)
public void saveUser(User user) {
    // ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_thymeleaf">Thymeleaf</h3>
<div class="paragraph">
<p>Thymeleaf es un motor de plantillas para aplicaciones web en Java que permite integrar HTML, CSS y JavaScript con datos dinámicos que se generan en el lado del servidor. Se utiliza principalmente en aplicaciones web basadas en el framework Spring.</p>
</div>
<div class="paragraph">
<p>Thymeleaf es relativamente flexible, y su sintaxis es muy similar a HTML, lo que lo hace muy fácil de aprender. Una de las principales ventajas de Thymeleaf es su capacidad para procesar plantillas tanto en el lado del servidor como en el lado del cliente.</p>
</div>
<div class="paragraph">
<p>En el lado del servidor, Thymeleaf puede procesar plantillas HTML con marcadores de posición para variables y expresiones, que se reemplazan por valores dinámicos en el servidor antes de enviar la respuesta HTTP al cliente. En el lado del cliente, Thymeleaf puede procesar plantillas HTML que se han enviado desde el servidor y actualizan el contenido dinámico en la página sin necesidad de realizar una nueva solicitud HTTP.</p>
</div>
<div class="sect3">
<h4 id="_las_directivas_de_thymeleaf">Las directivas de Thymeleaf</h4>
<div class="ulist">
<div class="title">Las directivas de Thymeleaf son:</div>
<ul>
<li>
<p><strong>th:text</strong>: permite mostrar el valor de una expresión o variable en el contenido de un elemento HTML.</p>
</li>
<li>
<p><strong>th:if</strong> y th:unless: permite incluir o excluir contenido HTML basado en una condición booleana.</p>
</li>
<li>
<p><strong>th:switch</strong> y th:case: permite realizar una selección de casos basada en una expresión y mostrar un contenido HTML diferente para cada caso.</p>
</li>
<li>
<p><strong>th:each</strong>: permite iterar sobre una colección de objetos y mostrar un contenido HTML para cada elemento.</p>
</li>
<li>
<p><strong>th:href</strong> y th:src: permite definir la URL de un enlace o de una imagen de manera dinámica a través de una expresión.</p>
</li>
<li>
<p><strong>th:object</strong>: permite establecer un objeto como contexto para la evaluación de expresiones dentro de un fragmento HTML.</p>
</li>
<li>
<p><strong>th:fragment</strong>: permite definir un fragmento HTML que puede ser incluido en otras plantillas a través de la directiva th:include.</p>
</li>
<li>
<p><strong>th:include</strong>: permite incluir un fragmento HTML definido en otra plantilla.</p>
</li>
<li>
<p><strong>th:attr</strong>: permite agregar atributos HTML dinámicamente a un elemento a través de una expresión.</p>
</li>
<li>
<p><strong>th:value</strong>: permite establecer el valor de un atributo HTML a través de una expresión.</p>
</li>
<li>
<p><strong>th:checked</strong>: permite establecer el estado de una casilla de verificación o de un botón de opción a través de una expresión.</p>
</li>
<li>
<p><strong>th:style</strong>: permite establecer dinámicamente el valor de una regla de estilo CSS.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de uso de th:each:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Nombre&lt;/th&gt;
      &lt;th&gt;Descripción&lt;/th&gt;
      &lt;th&gt;Precio&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;Feign
  &lt;tbody&gt;
    &lt;tr th:each="prod : ${productos}"&gt;
      &lt;td th:text="${prod.nombre}"&gt;Nombre del producto&lt;/td&gt;
      &lt;td th:text="${prod.descripcion}"&gt;Descripción del producto&lt;/td&gt;
      &lt;td th:text="${prod.precio}"&gt;Precio del producto&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de uso de th:if:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Nombre&lt;/th&gt;
      &lt;th&gt;Descripción&lt;/th&gt;
      &lt;th&gt;Precio&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr th:each="prod : ${productos}" th:if="${prod.precio &gt; 10}"&gt;
      &lt;td th:text="${prod.nombre}"&gt;Nombre del producto&lt;/td&gt;
      &lt;td th:text="${prod.descripcion}"&gt;Descripción del producto&lt;/td&gt;
      &lt;td th:text="${prod.precio}"&gt;Precio del producto&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de uso de th:switch:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;table&gt;
    &lt;thead&gt;
        &lt;tr&gt;
        &lt;th&gt;Nombre&lt;/th&gt;
        &lt;th&gt;Descripción&lt;/th&gt;
        &lt;th&gt;Precio&lt;/th&gt;https://www.baeldung.com/spring-boot-testing
        &lt;th&gt;Tipo&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr th:each="prod : ${productos}"&gt;
        &lt;td th:text="${prod.nombre}"&gt;Nombre del producto&lt;/td&gt;
        &lt;td th:text="${prod.descripcion}"&gt;Descripción del producto&lt;/td&gt;
            &lt;td th:text="${prod.precio}"&gt;Precio del producto&lt;/td&gt;
            &lt;td th:switch="${prod.tipo}"&gt;
                &lt;span th:case="'A'"&gt;Tipo A&lt;/span&gt;
                &lt;span th:case="'B'"&gt;Tipo B&lt;/span&gt;
                &lt;span th:case="'C'"&gt;Tipo C&lt;/span&gt;
                &lt;span th:case="*"&gt;Tipo desconocido&lt;/span&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de uso de th:href:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;a th:href="@{/productos/{id}(id=${prod.id})}"&gt;Ver detalles&lt;/a&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de uso de th:object:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;div th:object="${producto}"&gt;
    &lt;p&gt;Nombre: &lt;span th:text="*{nombre}"&gt;Nombre del producto&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;Descripción: &lt;span th:text="*{descripcion}"&gt;Descripción del producto&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;Precio: &lt;span th:text="*{precio}"&gt;Precio del producto&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de uso de th:fragment:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;div th:fragment="producto"&gt;
    &lt;p&gt;Nombre: &lt;span th:text="*{nombre}"&gt;Nombre del producto&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;Descripción: &lt;span th:text="*{descripcion}"&gt;Descripción del producto&lt;/span&gt;&lt;/p&gt;
    &lt;p&gt;Precio: &lt;span th:text="*{precio}"&gt;Precio del producto&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_security">Spring Security</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_qué_es_spring_security">¿Qué es Spring Security?</h3>
<div class="paragraph">
<p>Spring Security es un framework de seguridad que proporciona características de autenticación, autorización y protección contra ataques de seguridad en aplicaciones basadas en Spring.</p>
</div>
<div class="paragraph">
<p>Al utilizar Spring Security, podemos asegurarnos de que los usuarios que acceden a nuestra aplicación estén autenticados y autorizados para realizar determinadas acciones. También nos permite proteger nuestras aplicaciones contra ataques comunes como Cross-Site Request Forgery (CSRF), Cross-Site Scripting (XSS) y SQL Injection.</p>
</div>
<div class="paragraph">
<p>Spring Security se basa en filtros y proveedores de autenticación y autorización, que se encargan de procesar las solicitudes de los usuarios y verificar su identidad y permisos.</p>
</div>
<div class="ulist">
<div class="title">Algunos de los componentes principales de Spring Security son:</div>
<ul>
<li>
<p><strong>UserDetailsService</strong>: es una interfaz que se utiliza para cargar la información de los usuarios y sus roles desde una fuente de datos, como una base de datos o un servicio web.</p>
</li>
<li>
<p><strong>AuthenticationManager</strong>: Aquí se definen las reglas de autenticación respecto a las rutas y se configuran los proveedores de autenticación.</p>
</li>
<li>
<p><strong>PasswordEncoder</strong>: es una interfaz que se utiliza para codificar y decodificar las contraseñas de los usuarios, para que no se almacenen en texto plano en la base de datos o en otros medios de almacenamiento.</p>
</li>
<li>
<p><strong>AccessDecisionManager</strong>: es una interfaz que se utiliza para tomar decisiones de autorización y determinar si un usuario tiene acceso a una determinada funcionalidad o recurso en la aplicación.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para utilizar Spring Security en una aplicación, primero debemos agregar las dependencias correspondientes en el archivo pom.xml o build.gradle, según sea el caso. Luego, podemos configurar las reglas de seguridad y las opciones de autenticación y autorización en el archivo application.properties o mediante clases de configuración específicas de Spring Security.</p>
</div>
<div class="listingblock">
<div class="title">Las dependencias de Spring Security en Maven son:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Las dependencias de Spring Security en Gradle son:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-security'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Spring Security también proporciona integración con otros frameworks y herramientas de seguridad, como OAuth2, JWT, LDAP y SAML, lo que nos permite implementar características avanzadas de seguridad en nuestras aplicaciones.</p>
</div>
<div class="paragraph">
<p>En resumen, Spring Security es una herramienta esencial para asegurar nuestras aplicaciones Spring y protegerlas contra vulnerabilidades y ataques de seguridad.</p>
</div>
</div>
<div class="sect2">
<h3 id="_userdetailsservice">UserDetailsService</h3>
<div class="paragraph">
<p>En Spring Security, UserDetailsService es una interfaz que se utiliza para cargar la información de los usuarios y sus roles desde una fuente de datos, como una base de datos o un servicio web.</p>
</div>
<div class="paragraph">
<p>Cuando un usuario intenta autenticarse en nuestra aplicación, Spring Security utiliza el UserDetailsService para cargar la información del usuario y verificar sus credenciales. Si las credenciales son válidas, Spring Security crea un objeto Authentication con la información del usuario y lo almacena en el contexto de seguridad de la aplicación.</p>
</div>
<div class="paragraph">
<p>Para implementar un UserDetailsService, debemos crear una clase que implemente la interfaz y sobrescribir el método loadUserByUsername, que se utiliza para cargar la información del usuario a partir de su nombre de usuario.</p>
</div>
<div class="paragraph">
<p>En este método, podemos realizar consultas a la base de datos o a cualquier otro servicio de autenticación externo para obtener la información del usuario. La información del usuario debe ser devuelta en forma de un objeto UserDetails, que contiene información como el nombre de usuario, la contraseña, los roles y los permisos del usuario.</p>
</div>
<div class="listingblock">
<div class="title">Aquí hay un ejemplo básico de cómo implementar un UserDetailsService en Spring Security:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class CustomUserDetailsService implements UserDetailsService {

    @Autowired
    private UserRepository userRepository;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = userRepository.findByUsername(username);
        if (user == null) {
            throw new UsernameNotFoundException("User not found");
        }
        return new CustomUserDetails(user);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En este ejemplo, estamos cargando la información del usuario a partir de una base de datos utilizando el UserRepository, que es una interfaz que se encarga de las operaciones de CRUD en la tabla de usuarios. Después de cargar la información del usuario, estamos devolviendo un objeto CustomUserDetails, que es una clase que implementa la interfaz UserDetails y contiene la información del usuario y sus roles.</p>
</div>
<div class="listingblock">
<div class="title">Aquí hay un ejemplo de cómo implementar un UserDetailsService en Spring Security que utiliza una base de datos para obtener la información del usuario:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class CustomUserDetailsService implements UserDetailsService {

    @Autowired
    private UserRepository userRepository;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = userRepository.findByUsername(username);
        if (user == null) {
            throw new UsernameNotFoundException("User not found");
        }
        return new org.springframework.security.core.userdetails.User(
                user.getUsername(), user.getPassword(), getAuthorities(user));
    }

    private Collection&lt;? extends GrantedAuthority&gt; getAuthorities(User user) {
        String[] userRoles = user.getRoles().stream().map((role) -&gt; role.getName()).toArray(String[]::new);
        Collection&lt;GrantedAuthority&gt; authorities = AuthorityUtils.createAuthorityList(userRoles);
        return authorities;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authenticationmanager">AuthenticationManager</h3>
<div class="paragraph">
<p>AuthenticationManager es una clase en el framework de seguridad de Spring que se encarga de manejar la autenticación en una aplicación web. Es responsable de tomar las credenciales del usuario, autenticarlas y crear un objeto de autenticación para el usuario si se ha autenticado correctamente.</p>
</div>
<div class="paragraph">
<p>El proceso de autenticación puede variar dependiendo de la configuración de la aplicación, pero generalmente sigue los siguientes pasos:</p>
</div>
<div class="paragraph">
<p>El usuario proporciona sus credenciales, como un nombre de usuario y una contraseña.
El sistema valida las credenciales, generalmente mediante una comparación con información almacenada en una base de datos.
Si las credenciales son válidas, se crea un objeto de autenticación para el usuario, que contiene detalles como el nombre de usuario, los roles y cualquier otra información relevante.
El objeto de autenticación se almacena en el contexto de seguridad de la aplicación para que se pueda acceder posteriormente.
Aquí hay un ejemplo de cómo se puede usar AuthenticationManager en una aplicación Spring Boot:</p>
</div>
<div class="paragraph">
<p>Supongamos que tenemos una entidad "Usuario" en nuestra aplicación, que tiene propiedades como "nombre de usuario" y "contraseña". Además, tenemos una clase "UserService" que se encarga de interactuar con la base de datos y realizar la validación de credenciales.</p>
</div>
<div class="listingblock">
<div class="title">Primero, definimos una configuración de seguridad básica en nuestra clase principal:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@EnableWebSecurity
public class WebSecurityConfig {

    @Autowired
    private UserService userService;

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.userDetailsService(userService);
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests()
            .antMatchers("/admin/**").hasRole("ADMIN")
            .antMatchers("/user/**").hasRole("USER")
            .and().formLogin()
            .and().logout()
            .logoutSuccessUrl("/login?logout=true")
            .invalidateHttpSession(true)
            .clearAuthentication(true)
            .deleteCookies("JSESSIONID");
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Luego, en nuestra clase <strong>UserService</strong>, definimos el método <strong>loadUserByUsername</strong> para buscar al usuario en la base de datos y validar sus credenciales:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class UserService implements UserDetailsService {

    @Autowired
    private UserRepository userRepository;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = userRepository.findByUsername(username);
        if (user == null) {
            throw new UsernameNotFoundException("Usuario no encontrado");
        }
        return new org.springframework.security.core.userdetails.User(
                user.getUsername(),
                user.getPassword(),
                user.isEnabled(),
                true,
                true,
                true,
                getAuthorities(user.getRoles()));
    }

    private Collection&lt;? extends GrantedAuthority&gt; getAuthorities(
            Collection&lt;Role&gt; roles) {
        return roles.stream()
                .map(role -&gt; new SimpleGrantedAuthority("ROLE_" + role.getName()))
                .collect(Collectors.toList());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_authenticationprovider">AuthenticationProvider</h3>
<div class="paragraph">
<p>AuthenticationProvider es una interfaz en Spring Security que se utiliza para autenticar solicitudes de seguridad en una aplicación web. Esta interfaz se encarga de validar las credenciales de un usuario y autenticarlo en la aplicación.</p>
</div>
<div class="paragraph">
<p>AuthenticationProvider se utiliza en conjunto con AuthenticationManager para proporcionar la lógica de autenticación. AuthenticationManager utiliza uno o más proveedores de autenticación (AuthenticationProvider) para realizar la autenticación.</p>
</div>
<div class="paragraph">
<p>La interfaz AuthenticationProvider tiene un único método llamado "authenticate", que toma como parámetro un objeto Authentication y devuelve un objeto Authentication si la autenticación es exitosa. Si la autenticación falla, el método lanza una excepción AuthenticationException.</p>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de implementación de un AuthenticationProvider en Spring Security sería el siguiente:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyAuthenticationProvider implements AuthenticationProvider {

  @Autowired
  private UserService userService;

  @Override
  public Authentication authenticate(Authentication authentication) throws AuthenticationException {
    String username = authentication.getName();
    String password = authentication.getCredentials().toString();

    User user = userService.findByUsername(username);

    if (user == null) {
      throw new BadCredentialsException("Usuario no encontrado");
    }

    if (!passwordEncoder.matches(password, user.getPassword())) {
      throw new BadCredentialsException("Contraseña incorrecta");
    }

    List&lt;GrantedAuthority&gt; roles = new ArrayList&lt;&gt;();
    roles.add(new SimpleGrantedAuthority(user.getRole().getName()));

    return new UsernamePasswordAuthenticationToken(username, password, roles);
  }

  @Override
  public boolean supports(Class&lt;?&gt; authentication) {
    return authentication.equals(UsernamePasswordAuthenticationToken.class);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_passwordencoder">PasswordEncoder</h3>
<div class="paragraph">
<p>PasswordEncoder en Spring Boot es una interfaz que se utiliza para cifrar y descifrar contraseñas. El objetivo de cifrar contraseñas es evitar que las contraseñas en texto plano sean almacenadas en una base de datos, lo que puede ser un problema de seguridad. En su lugar, se almacena el valor cifrado de la contraseña en la base de datos.</p>
</div>
<div class="paragraph">
<p>Spring Boot proporciona varias implementaciones de la interfaz PasswordEncoder. Una de las implementaciones más comunes es BCryptPasswordEncoder. BCryptPasswordEncoder utiliza el algoritmo bcrypt para cifrar contraseñas. El algoritmo bcrypt es un algoritmo de cifrado de contraseñas sólido y seguro, que utiliza una técnica de "salting" (añadir una cadena aleatoria) para hacer que el cifrado sea más fuerte.</p>
</div>
<div class="paragraph">
<p>Para utilizar PasswordEncoder en Spring Boot, primero debes crear una instancia de una implementación de la interfaz PasswordEncoder.</p>
</div>
<div class="listingblock">
<div class="title">Para usar, hay que importar la dependencia de Spring Security:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Luego, en nuestra clase principal, podemos inyectar una instancia de PasswordEncoder en nuestro código:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;

@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ahora, puedes utilizar la instancia de PasswordEncoder en tus servicios de usuario (por ejemplo, UserService). En el siguiente ejemplo, utilizamos PasswordEncoder para cifrar la contraseña antes de almacenarla en la base de datos:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

@Service
public class UserService {

    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;

    public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
    }

    public void saveUser(User user) {
        String encodedPassword = passwordEncoder.encode(user.getPassword());
        user.setPassword(encodedPassword);
        userRepository.save(user);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Por último, puedes utilizar PasswordEncoder en tus controladores de Spring. En el siguiente ejemplo, utilizamos PasswordEncoder para verificar que la contraseña proporcionada por el usuario coincide con la contraseña almacenada en la base de datos:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class UserController {

    private final UserService userService;
    private final PasswordEncoder passwordEncoder;

    public UserController(UserService userService, PasswordEncoder passwordEncoder) {
        this.userService = userService;
        this.passwordEncoder = passwordEncoder;
    }

    @PostMapping("/login")
    public void login(@RequestBody LoginRequest loginRequest) {
        User user = userService.findUserByUsername(loginRequest.getUsername());

        if (user != null) {
            if (passwordEncoder.matches(loginRequest.getPassword(), user.getPassword())) {
                // la contraseña coincide, inicia sesión
            } else {
                // la contraseña no coincide, muestra un mensaje de error
            }
        } else {
            // el usuario no existe, muestra un mensaje de error
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Un curl que nos permite probar el login:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -X POST -H "Content-Type: application/json" -d '{"username":"usuario","password":"contraseña"}' http://localhost:8080/login</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_accessdecisionmanager">AccessDecisionManager</h3>
<div class="paragraph">
<p>AccessDecisionManager es una interfaz que se utiliza para tomar decisiones de acceso a los recursos protegidos. Su función principal es determinar si un usuario tiene los permisos necesarios para acceder a un recurso determinado.</p>
</div>
<div class="paragraph">
<p>AccessDecisionManager trabaja en conjunto con otros componentes de Spring Security, como los filtros de seguridad y los proveedores de autenticación, para determinar si un usuario puede acceder a un recurso. En particular, AccessDecisionManager se utiliza para tomar decisiones de acceso en el nivel de autorización después de que un usuario ha sido autenticado.</p>
</div>
<div class="paragraph">
<p>AccessDecisionManager trabaja en conjunto con otros componentes de Spring Security, como los filtros de seguridad y los proveedores de autenticación, para determinar si un usuario puede acceder a un recurso. En particular, AccessDecisionManager se utiliza para tomar decisiones de acceso en el nivel de autorización después de que un usuario ha sido autenticado.</p>
</div>
<div class="ulist">
<div class="title">Para tomar una decisión de acceso, AccessDecisionManager toma en cuenta varios factores, incluyendo los siguientes:</div>
<ul>
<li>
<p>La identidad del usuario que intenta acceder al recurso</p>
</li>
<li>
<p>Los permisos y roles asociados con el usuario</p>
</li>
<li>
<p>La configuración de seguridad del recurso que se está intentando acceder</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">AccessDecisionManager puede tomar una de tres decisiones posibles:</div>
<ul>
<li>
<p>Permitir el acceso al recurso: esto significa que el usuario tiene los permisos necesarios para acceder al recurso y se le permitirá hacerlo.</p>
</li>
<li>
<p>Denegar el acceso al recurso: esto significa que el usuario no tiene los permisos necesarios para acceder al recurso y se le denegará el acceso.</p>
</li>
<li>
<p>Delegar la decisión a un componente diferente: esto significa que AccessDecisionManager no puede tomar una decisión definitiva y delegará la decisión a otro componente.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La implementación predeterminada de AccessDecisionManager en Spring Security es AffirmativeBased, que sigue una lógica de "permiso concedido" para tomar decisiones de acceso. Esto significa que, en general, si un usuario tiene al menos un permiso que le permite acceder a un recurso determinado, se le permitirá el acceso.</p>
</div>
<div class="listingblock">
<div class="title">Para utilizar AccessDecisionManager en Spring Boot, primero debes crear una instancia de una implementación de la interfaz AccessDecisionManager. En el siguiente ejemplo:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@EnableWebSecurity
public class WebSecurityConfig {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests()
            .antMatchers("/admin").hasRole("ADMIN")
            .anyRequest().authenticated()
            .and()
            .formLogin()
            .and()
            .httpBasic();
    }

    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication()
            .withUser("usuario").password("contraseña").roles("USER")
            .and()
            .withUser("admin").password("contraseña").roles("ADMIN");
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }

    @Bean
    public AccessDecisionManager accessDecisionManager() {
        return new AffirmativeBased(Arrays.asList(new RoleVoter()));
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Aquí, estamos configurando la seguridad de nuestra aplicación de la siguiente manera:</div>
<ul>
<li>
<p>"/admin" está protegido y solo los usuarios con el rol "ADMIN" pueden acceder a él.</p>
</li>
<li>
<p>Cualquier otra solicitud debe estar autenticada.</p>
</li>
<li>
<p>Estamos utilizando la autenticación en memoria, pero en una aplicación real, deberíamos utilizar un proveedor de autenticación más robusto.</p>
</li>
<li>
<p>Estamos usando un codificador de contraseñas BCryptPasswordEncoder para codificar las contraseñas.</p>
</li>
<li>
<p>Estamos creando un AccessDecisionManager usando la implementación AffirmativeBased y un RoleVoter.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_casos_de_uso_de_spring_security">Casos de uso de Spring Security</h3>
<div class="sect3">
<h4 id="_autenticación_básica">Autenticación básica</h4>
<div class="paragraph">
<p>La autenticación básica es un método de autenticación simple que se utiliza para proteger los recursos de una aplicación web. En este método, el cliente envía las credenciales de autenticación (nombre de usuario y contraseña) en cada solicitud HTTP. El servidor verifica las credenciales de autenticación y, si son válidas, devuelve el recurso solicitado.</p>
</div>
<div class="listingblock">
<div class="title">Las dependencias necesarias para utilizar la autenticación básica en Spring Boot son las siguientes:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para utilizar la autenticación básica en Spring Boot, primero debes crear una instancia de la clase HttpBasicConfigurer. En el siguiente ejemplo:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@EnableWebSecurity
public class WebSecurityConfig {

    @Autowired private MyBasicAuthenticationEntryPoint authenticationEntryPoint;

    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth
          .inMemoryAuthentication()
          .withUser("user1")
          .password(passwordEncoder().encode("user1Pass"))
          .authorities("ROLE_USER");
    }

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.authorizeRequests()
            .antMatchers("/securityNone")
            .permitAll()
            .anyRequest()
            .authenticated()
            .and()
            .httpBasic()
            .authenticationEntryPoint(authenticationEntryPoint);
        http.addFilterAfter(new CustomFilter(), BasicAuthenticationFilter.class);
        return http.build();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para probarlo, podemos usar curl:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -i --user user1:user1Pass http://localhost:8080/spring-security-rest-basic-auth/api/foos/1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Por defecto, el BasicAuthenticationEntryPoint proporcionado por Spring Security devuelve una página completa para una respuesta 401 Unauthorized de vuelta al cliente. Esta representación HTML del error se muestra bien en un navegador. Por el contrario, no está bien adaptado para otros escenarios, como una API REST donde se puede preferir una representación json.</p>
</div>
<div class="listingblock">
<div class="title">El nuevo entrypoint se define como un bean estándar:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Component
public class MyBasicAuthenticationEntryPoint extends BasicAuthenticationEntryPoint {

    @Override
    public void commence(
      HttpServletRequest request, HttpServletResponse response, AuthenticationException authEx)
      throws IOException, ServletException {
        response.addHeader("WWW-Authenticate", "Basic realm="" + getRealmName() + """);
        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
        PrintWriter writer = response.getWriter();
        writer.println("HTTP Status 401 - " + authEx.getMessage());
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        setRealmName("Baeldung");
        super.afterPropertiesSet();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_manejo_de_sesiones">Manejo de sesiones</h4>
<div class="paragraph">
<p>En una aplicación Spring Boot, el manejo de sesiones se puede realizar de varias maneras. Una de las formas más comunes de manejar las sesiones es a través del uso de cookies de sesión.</p>
</div>
<div class="paragraph">
<p>Cuando un usuario inicia sesión en una aplicación web, se crea una sesión en el servidor que contiene la información de la sesión, como el ID de sesión y cualquier dato adicional que se haya almacenado en la sesión. El servidor envía una cookie de sesión al navegador del usuario, que contiene el ID de sesión. El navegador envía la cookie de sesión en cada solicitud posterior, permitiendo que el servidor identifique la sesión del usuario.</p>
</div>
<div class="listingblock">
<div class="title">Las dependencias necesarias para utilizar el manejo de sesiones en Spring Boot son las siguientes:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para utilizar el manejo de sesiones en Spring Boot, primero debes crear una instancia de la clase HttpSessionConfigurer. En el siguiente ejemplo:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@EnableWebSecurity
public class WebSecurityConfig {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .authorizeRequests()
                .antMatchers("/login").permitAll()
                .anyRequest().authenticated()
            .and()
            .formLogin()
                .loginPage("/login")
                .defaultSuccessUrl("/home")
                .permitAll()
            .and()
            .logout()
                .logoutUrl("/logout")
                .permitAll()
            .and()
            .sessionManagement()
                .invalidSessionUrl("/login?expired")
                .maximumSessions(1)
                .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)
                .maxSessionsPreventsLogin(true);

    }
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Las opciones disponibles en SessionCreationPolicy son las siguientes:</div>
<ul>
<li>
<p><strong>ALWAYS</strong>: Siempre se crea una nueva sesión para cada solicitud. Esto significa que se crea una nueva sesión, incluso si el usuario ya tiene una sesión activa.</p>
</li>
<li>
<p><strong>NEVER</strong>: Nunca se crea una nueva sesión. Si el usuario no tiene una sesión activa, no se crea una nueva y se considera como una sesión nula. Esta opción es útil cuando no se necesita una sesión en la aplicación.</p>
</li>
<li>
<p><strong>IF_REQUIRED</strong>: Se crea una nueva sesión solo si es necesario. Esto significa que se crea una sesión solo si el usuario no tiene una sesión activa. Si el usuario ya tiene una sesión activa, se utiliza esa sesión.</p>
</li>
<li>
<p><strong>STATELESS</strong>: Las solicitudes no se asocian con una sesión en absoluto. Esto se utiliza en aplicaciones stateless donde no se almacena información de estado del usuario en la sesión. En su lugar, la información se transporta en cada solicitud.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">El controlador de inicio de sesión se define de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class HomeController {

    @GetMapping("/login")
    public String showLoginForm(Model model) {
        return "login";
    }

    @GetMapping("/home")
    public String showHomePage() {
        return "home";
    }

    @GetMapping("/logout")
    public String logout(HttpServletRequest request) throws ServletException {
        request.logout();
        return "redirect:/login?logout";
    }

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">login.html</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;title&gt;Login&lt;/title&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Login&lt;/h1&gt;
    &lt;div th:if="${param.error}"&gt;
        &lt;p&gt;Invalid username and password.&lt;/p&gt;
    &lt;/div&gt;
    &lt;div th:if="${param.logout}"&gt;
        &lt;p&gt;You have been logged out.&lt;/p&gt;
    &lt;/div&gt;
    &lt;form th:action="@{/login}" method="post"&gt;
        &lt;div&gt;
            &lt;label for="username"&gt;Username:&lt;/label&gt;
            &lt;input type="text" id="username" name="username" autofocus required&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;label for="password"&gt;Password:&lt;/label&gt;
            &lt;input type="password" id="password" name="password" required&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;button type="submit"&gt;Login&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">home.html</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;title&gt;Home&lt;/title&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Welcome!&lt;/h1&gt;
    &lt;p&gt;You are now logged in.&lt;/p&gt;
    &lt;form th:action="@{/logout}" method="post"&gt;
        &lt;button type="submit"&gt;Logout&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_beans_de_sesión_session_scoped_beans">Beans de sesión (Session Scoped Beans)</h4>
<div class="paragraph">
<p>En Spring Framework, un bean con ámbito de sesión (Session Scoped Bean) es un objeto que está asociado a una sesión HTTP individual. Esto significa que una instancia de bean se crea y se almacena en la sesión HTTP del usuario cuando se crea una nueva sesión, y se destruye cuando la sesión termina. Los beans con ámbito de sesión son útiles cuando se necesita mantener el estado entre múltiples solicitudes de un mismo usuario.</p>
</div>
<div class="listingblock">
<div class="title">Las dependencias necesarias para utilizar los beans de sesión en Spring Boot son las siguientes:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para utilizar los beans de sesión en Spring Boot, primero hay que crear una clase de configuración que contenga el bean de sesión. En el siguiente ejemplo:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@ComponentScan(basePackages = {"com.example.demo"})
public class AppConfig {
    // ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para crear un bean de sesión, debemos utilizar la anotación @SessionScope. En el siguiente ejemplo:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Component
@SessionScope
public class SessionBean {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para utilizar el bean de sesión, debemos inyectarlo en el controlador. En el siguiente ejemplo:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Controller
public class HomeController {

    @Autowired
    private SessionBean sessionBean;

    @GetMapping("/")
    public String showHomePage(Model model) {
        model.addAttribute("name", sessionBean.getName());
        return "home";
    }

    @PostMapping("/save")
    public String saveName(@RequestParam String name) {
        sessionBean.setName(name);
        return "redirect:/";
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_obtener_información_del_usuario_en_spring_security">Obtener información del usuario en Spring Security</h4>
<div class="paragraph">
<p>Spring Security proporciona una forma de obtener información del usuario actualmente autenticado en la aplicación. Esta información se puede utilizar para realizar acciones específicas para el usuario actualmente autenticado.</p>
</div>
<div class="listingblock">
<div class="title">Las dependencias necesarias para obtener información del usuario en Spring Security son las siguientes:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configuramos la seguridad de nuestra aplicación de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@EnableWebSecurity
public class WebSecurityConfig {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .authorizeRequests()
                .antMatchers("/").permitAll()
                .antMatchers("/secured").authenticated()
            .and()
            .formLogin();
    }

    @Autowired
    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
        auth
            .inMemoryAuthentication()
                .withUser("user").password("password").roles("USER");
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Creamos un controlador para probar la funcionalidad:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RestController
public class SecuredController {

    @GetMapping("/secured")
    public String securedEndpoint() {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        String username = authentication.getName();
        return "Hello, " + username + "!";
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para probarlo, podemos usar curl:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">curl -i -X GET http://localhost:8080/secured</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_security_con_autenticación_basada_en_bearer_token">Spring Security con autenticación basada en Bearer Token</h3>
<div class="listingblock">
<div class="title">Definimos WebSecurityConfig de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@EnableGlobalMethodSecurity(
		// securedEnabled = true,
		// jsr250Enabled = true,
		prePostEnabled = true)
public class WebSecurityConfig {
	@Autowired
	UserDetailsServiceImpl userDetailsService;

	@Autowired
	private AuthEntryPointJwt unauthorizedHandler;

	@Bean
	public AuthTokenFilter authenticationJwtTokenFilter() {
		return new AuthTokenFilter();
	}

	@Bean
  public DaoAuthenticationProvider authenticationProvider() {
      DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();

      authProvider.setUserDetailsService(userDetailsService);
      authProvider.setPasswordEncoder(passwordEncoder());

      return authProvider;
  }

  @Bean
  public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {
    return authConfig.getAuthenticationManager();
  }

	@Bean
	public PasswordEncoder passwordEncoder() {
		return new BCryptPasswordEncoder();
	}

	@Bean
  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
    http.cors().and().csrf().disable()
        .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()
        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()
        .authorizeRequests().antMatchers("/api/auth/**").permitAll()
        .antMatchers("/api/test/**").permitAll()
        .anyRequest().authenticated();

    http.authenticationProvider(authenticationProvider());

    http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);

    return http.build();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La anotación @EnableGlobalMethodSecurity permite habilitar la seguridad a nivel de método. Esto nos permite utilizar las anotaciones @PreAuthorize y @PostAuthorize para controlar el acceso a los métodos de la aplicación.</p>
</div>
<div class="paragraph">
<p>Sobreescribimos el método configure(AuthenticationManagerBuilder auth) para configurar el AuthenticationManager. En este caso, utilizamos un AuthenticationProvider personalizado para autenticar a los usuarios.</p>
</div>
<div class="paragraph">
<p>UserDetailsServiceImpl es la clase que implementa la interfaz UserDetailsService de Spring Security. Esta clase se utiliza para cargar los datos del usuario desde la base de datos.</p>
</div>
<div class="listingblock">
<div class="title">UserDetailsServiceImpl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class UserDetailsServiceImpl implements UserDetailsService {
  @Autowired
  UserRepository userRepository;

  @Override
  @Transactional
  public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
    User user = userRepository.findByUsername(username)
        .orElseThrow(() -&gt; new UsernameNotFoundException("User Not Found with username: " + username));

    return UserDetailsImpl.build(user);
  }

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">El filtrado de las peticiones se realiza con la clase AuthTokenFilter, que extiende de la clase OncePerRequestFilter de Spring Security. Esta clase se encarga de obtener el token de la cabecera de la petición y validar el token. Si el token es válido, se obtiene el nombre de usuario y se crea un objeto UsernamePasswordAuthenticationToken, que se utiliza para autenticar al usuario.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AuthTokenFilter extends OncePerRequestFilter {
  @Autowired
  private JwtUtils jwtUtils;

  @Autowired
  private UserDetailsServiceImpl userDetailsService;

  private static final Logger logger = LoggerFactory.getLogger(AuthTokenFilter.class);

  @Override
  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
      throws ServletException, IOException {
    try {
      String jwt = parseJwt(request);
      if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {
        String username = jwtUtils.getUserNameFromJwtToken(jwt);

        UserDetails userDetails = userDetailsService.loadUserByUsername(username);
        UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null,
            userDetails.getAuthorities());
        authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));

        SecurityContextHolder.getContext().setAuthentication(authentication);
      }
    } catch (Exception e) {
      logger.error("Cannot set user authentication: {}", e);
    }

    filterChain.doFilter(request, response);
  }

  private String parseJwt(HttpServletRequest request) {
    String headerAuth = request.getHeader("Authorization");

    if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith("Bearer ")) {
      return headerAuth.substring(7, headerAuth.length());
    }

    return null;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Cuando hacemos doFilterInternal, obtenemos el token de la cabecera de la petición y lo validamos. Si el token es válido, obtenemos el nombre de usuario y creamos un objeto UsernamePasswordAuthenticationToken, que se utiliza para autenticar al usuario.</p>
</div>
<div class="listingblock">
<div class="title">JwtUtils es la clase que se utiliza para generar y validar los tokens JWT.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Component
public class JwtUtils {
  private static final Logger logger = LoggerFactory.getLogger(JwtUtils.class);

  @Value("${bezkoder.app.jwtSecret}")
  private String jwtSecret;

  @Value("${bezkoder.app.jwtExpirationMs}")
  private int jwtExpirationMs;

  public String generateJwtToken(Authentication authentication) {

    UserDetailsImpl userPrincipal = (UserDetailsImpl) authentication.getPrincipal();

    return Jwts.builder().setSubject((userPrincipal.getUsername())).setIssuedAt(new Date())
        .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs)).signWith(SignatureAlgorithm.HS512, jwtSecret)
        .compact();
  }

  public String getUserNameFromJwtToken(String token) {
    return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();
  }

  public boolean validateJwtToken(String authToken) {
    try {
      Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);
      return true;
    } catch (SignatureException e) {
      logger.error("Invalid JWT signature: {}", e.getMessage());
    } catch (MalformedJwtException e) {
      logger.error("Invalid JWT token: {}", e.getMessage());
    } catch (ExpiredJwtException e) {
      logger.error("JWT token is expired: {}", e.getMessage());
    } catch (UnsupportedJwtException e) {
      logger.error("JWT token is unsupported: {}", e.getMessage());
    } catch (IllegalArgumentException e) {
      logger.error("JWT claims string is empty: {}", e.getMessage());
    }

    return false;
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">HandleAuthEntryPointJwt es la clase que se utiliza para manejar los errores de autenticación.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Component
public class AuthEntryPointJwt implements AuthenticationEntryPoint {

  private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);

  @Override
  public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)
      throws IOException, ServletException {
    logger.error("Unauthorized error: {}", authException.getMessage());
    response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Error: Unauthorized");
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si el usuario no está autenticado, se devuelve un error 401.</p>
</div>
<div class="paragraph">
<p>Finalmente, creamos los controladores con las rutas para autenticar al usuario y obtener los datos del usuario.</p>
</div>
<div class="listingblock">
<div class="title">AuthController</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@CrossOrigin(origins = "*", maxAge = 3600)
@RestController
@RequestMapping("/api/auth")
public class AuthController {
	@Autowired
	AuthenticationManager authenticationManager;

	@Autowired
	UserRepository userRepository;

	@Autowired
	RoleRepository roleRepository;

	@Autowired
	PasswordEncoder encoder;

	@Autowired
	JwtUtils jwtUtils;

	@PostMapping("/signin")
	public ResponseEntity&lt;?&gt; authenticateUser(@Valid @RequestBody LoginRequest loginRequest) {

		Authentication authentication = authenticationManager.authenticate(
				new UsernamePasswordAuthenticationToken(loginRequest.getUsername(), loginRequest.getPassword()));

		SecurityContextHolder.getContext().setAuthentication(authentication);
		String jwt = jwtUtils.generateJwtToken(authentication);

		UserDetailsImpl userDetails = (UserDetailsImpl) authentication.getPrincipal();
		List&lt;String&gt; roles = userDetails.getAuthorities().stream()
				.map(item -&gt; item.getAuthority())
				.collect(Collectors.toList());

		return ResponseEntity.ok(new JwtResponse(jwt,
												 userDetails.getId(),
												 userDetails.getUsername(),
												 userDetails.getEmail(),
												 roles));
	}

	@PostMapping("/signup")
	public ResponseEntity&lt;?&gt; registerUser(@Valid @RequestBody SignupRequest signUpRequest) {
		if (userRepository.existsByUsername(signUpRequest.getUsername())) {
			return ResponseEntity
					.badRequest()
					.body(new MessageResponse("Error: Username is already taken!"));
		}

		if (userRepository.existsByEmail(signUpRequest.getEmail())) {
			return ResponseEntity
					.badRequest()
					.body(new MessageResponse("Error: Email is already in use!"));
		}

		// Create new user's account
		User user = new User(signUpRequest.getUsername(),
							 signUpRequest.getEmail(),
							 encoder.encode(signUpRequest.getPassword()));

		Set&lt;String&gt; strRoles = signUpRequest.getRole();
		Set&lt;Role&gt; roles = new HashSet&lt;&gt;();

		if (strRoles == null) {
			Role userRole = roleRepository.findByName(ERole.ROLE_USER)
					.orElseThrow(() -&gt; new RuntimeException("Error: Role is not found."));
			roles.add(userRole);
		} else {
			strRoles.forEach(role -&gt; {
				switch (role) {
				case "admin":
					Role adminRole = roleRepository.findByName(ERole.ROLE_ADMIN)
							.orElseThrow(() -&gt; new RuntimeException("Error: Role is not found."));
					roles.add(adminRole);

					break;
				case "mod":
					Role modRole = roleRepository.findByName(ERole.ROLE_MODERATOR)
							.orElseThrow(() -&gt; new RuntimeException("Error: Role is not found."));
					roles.add(modRole);

					break;
				default:
					Role userRole = roleRepository.findByName(ERole.ROLE_USER)
							.orElseThrow(() -&gt; new RuntimeException("Error: Role is not found."));
					roles.add(userRole);
				}
			});
		}

		user.setRoles(roles);
		userRepository.save(user);

		return ResponseEntity.ok(new MessageResponse("User registered successfully!"));
	}
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">En el controlador de autenticación, se definen dos rutas:</div>
<ul>
<li>
<p>/api/auth/signup: ruta para registrar un nuevo usuario.</p>
</li>
<li>
<p>/api/auth/signin: ruta para autenticar al usuario.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La anotación @CrossOrigin se utiliza para permitir las peticiones desde cualquier origen. Esto es necesario para que el cliente pueda acceder a los recursos del servidor.</p>
</div>
<div class="listingblock">
<div class="title">Finalmente creamos el controlador para obtener los datos del usuario.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@CrossOrigin(origins = "*", maxAge = 3600)
@RestController
@RequestMapping("/api/test")
public class TestController {
	@GetMapping("/all")
	public String allAccess() {
		return "Public Content.";
	}

	@GetMapping("/user")
	@PreAuthorize("hasRole('USER') or hasRole('MODERATOR') or hasRole('ADMIN')")
	public String userAccess() {
		return "User Content.";
	}

	@GetMapping("/mod")
	@PreAuthorize("hasRole('MODERATOR')")
	public String moderatorAccess() {
		return "Moderator Board.";
	}

	@GetMapping("/admin")
	@PreAuthorize("hasRole('ADMIN')")
	public String adminAccess() {
		return "Admin Board.";
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>La anotation @PreAuthorize se utiliza para verificar el rol del usuario antes de acceder a los recursos del servidor.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_boot_profiles">Spring Boot Profiles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Los perfiles de Spring Boot son una forma de definir diferentes configuraciones para una aplicación. Esto permite que una aplicación se ejecute con diferentes configuraciones según el entorno en el que se ejecute.</p>
</div>
<div class="paragraph">
<p>Por ejemplo, una aplicación puede tener diferentes configuraciones para los entornos de desarrollo, pruebas y producción. En el entorno de desarrollo, la aplicación puede utilizar una base de datos en memoria como H2, mientras que en el entorno de producción puede utilizar una base de datos como MySQL o PostgreSQL.</p>
</div>
<div class="paragraph">
<p>Para definir un perfil en Spring Boot, se debe crear un archivo de propiedades con el nombre application-{profile}.properties. Por ejemplo, si queremos definir un perfil para el entorno de desarrollo, debemos crear un archivo de propiedades con el nombre application-dev.properties.</p>
</div>
<div class="listingblock">
<div class="title">Para lanzar la aplicación con Gradle con un perfil específico:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./gradlew bootRun --args='--spring.profiles.active=dev'</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Los nombres más comunes para los perfiles son los siguientes:</div>
<ul>
<li>
<p>application.properties: perfil por defecto.</p>
</li>
<li>
<p>application-dev.properties: perfil para el entorno de desarrollo.</p>
</li>
<li>
<p>application-test.properties: perfil para el entorno de pruebas.</p>
</li>
<li>
<p>application-prod.properties: perfil para el entorno de producción.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_profile">@Profile</h3>
<div class="paragraph">
<p>La anotación @Profile se utiliza para definir un perfil en una clase o método. Por ejemplo, si queremos que una clase se ejecute sólo en el entorno de desarrollo.</p>
</div>
<div class="listingblock">
<div class="title">Podemos definir el perfil de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Profile("dev")
@Component
public class DevBean {
    // ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Podemos definir el perfil de un método de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Profile("dev")
@Bean
public DataSource devDataSource() {
    // ...
}

@Profile("prod")
@Bean
public DataSource prodDataSource() {
    // ...
}

@Bean
public DataSource dataSource() {
    // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cómo_definir_profiles_en_spring_boot">Cómo definir profiles en Spring Boot</h3>
<div class="paragraph">
<p>También podemos definir los perfiles en el código. Por ejemplo, si queremos que una clase se ejecute sólo en el entorno de desarrollo, podemos definir el perfil de varias maneras.</p>
</div>
<div class="listingblock">
<div class="title">Mediante la anotación @Profile:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Profile("dev")
@Component
public class DevBean {
    // ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">En WebApplicationInitializer:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AppInitializer implements WebApplicationInitializer {
    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        servletContext.setInitParameter("spring.profiles.active", "dev");
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mediante ConfigurableEnvironment</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Autowired
private ConfigurableEnvironment env;

public void someMethod() {
    env.setActiveProfiles("dev");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mediante System.setProperty</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void someMethod() {
    System.setProperty("spring.profiles.active", "dev");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mediante los parámetros de la JVM</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">java -jar -Dspring.profiles.active=dev myapp.jar</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mediante variables de entorno</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">export spring_profiles_active=dev</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mediante la configuración en Maven, dentro de la etiqueta &lt;project&gt;:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;id&gt;dev&lt;/id&gt;
        &lt;properties&gt;
            &lt;activatedProperties&gt;dev&lt;/activatedProperties&gt;
        &lt;/properties&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mediante la configuración en Gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">bootRun {
    systemProperties['spring.profiles.active'] = 'dev'
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Con la anotation @ActiveProfiles podemos definir el perfil en las pruebas unitarias.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ActiveProfiles("dev")
public class DevBeanTest {
    // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cómo_obtener_los_perfiles_en_spring_boot">Cómo obtener los perfiles en Spring Boot</h3>
<div class="listingblock">
<div class="title">Para obtener los perfiles en Spring Boot, podemos utilizar la clase Environment.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Autowired
private Environment env;

public void someMethod() {
    String[] profiles = env.getActiveProfiles();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cómo_definir_un_perfil_por_defecto_en_spring_boot">Cómo definir un perfil por defecto en Spring Boot</h3>
<div class="listingblock">
<div class="title">Para definir un perfil por defecto en Spring Boot, podemos utilizar la propiedad spring.profiles.default en el archivo application.properties.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">spring.profiles.default=dev</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing_con_spring_boot">Testing con Spring Boot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En Spring Boot, el testing se puede realizar mediante el uso del framework de pruebas JUnit, que es muy popular en la comunidad de desarrollo de Java. Spring Boot también proporciona una serie de herramientas y clases de ayuda para facilitar la escritura de pruebas de unidad, integración y end-to-end.</p>
</div>
<div class="paragraph">
<p>En Spring Boot, hay varias formas de hacer testing, dependiendo de las necesidades y objetivos de la aplicación. A continuación, te presento algunas de las formas más comunes de hacer testing en Spring Boot:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Pruebas unitarias</strong>: Son pruebas que se realizan para comprobar el correcto funcionamiento de un método o clase aislada. En Spring Boot, las pruebas unitarias se realizan utilizando JUnit y Mockito.</p>
</li>
<li>
<p><strong>Pruebas de integración</strong>: Son pruebas que se realizan para comprobar el correcto funcionamiento de la interacción entre diferentes componentes de la aplicación. En Spring Boot, las pruebas de integración se realizan utilizando Spring Test Framework, que permite cargar el contexto de la aplicación y realizar pruebas de extremo a extremo.</p>
</li>
<li>
<p><strong>Pruebas de aceptación</strong>: Son pruebas que se realizan para comprobar que la aplicación cumple con los requisitos funcionales y no funcionales definidos por el cliente o el usuario final. En Spring Boot, las pruebas de aceptación se realizan utilizando herramientas de automatización de pruebas, como Cucumber o Selenium.</p>
</li>
<li>
<p><strong>Pruebas de rendimiento</strong>: Son pruebas que se realizan para comprobar el rendimiento de la aplicación en diferentes escenarios de carga y tráfico. En Spring Boot, las pruebas de rendimiento se realizan utilizando herramientas de benchmarking, como JMeter o Gatling.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pruebas de seguridad: Son pruebas que se realizan para comprobar la seguridad de la aplicación, detectar vulnerabilidades y asegurar la protección de los datos y la privacidad de los usuarios. En Spring Boot, las pruebas de seguridad se realizan utilizando herramientas de análisis estático y dinámico, como SonarQube o OWASP ZAP.</p>
</div>
<div class="sect2">
<h3 id="_pruebas_unitarias_con_junit">Pruebas unitarias con JUnit</h3>
<div class="paragraph">
<p>Aquí hay un ejemplo básico de cómo realizar pruebas de unidad en una aplicación Spring Boot utilizando JUnit:</p>
</div>
<div class="listingblock">
<div class="title">Supongamos que tienes una clase de servicio llamada "UserService" que contiene un método llamado "getUserById" que recibe un id de usuario y devuelve un objeto User correspondiente a ese id.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class UserService {

    public User getUserById(Long id) {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ahora queremos probar que el método "getUserById" funciona correctamente. Aquí está el código de prueba utilizando JUnit:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunWith(SpringRunner.class)
@SpringBootTest
public class UserServiceTest {

    @Autowired
    private UserService userService;

    @Test
    public void testGetUserById() {
        User user = userService.getUserById(1L);
        assertNotNull(user);
        assertEquals("John", user.getName());
        assertEquals("Doe", user.getSurname());
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En este ejemplo, estamos utilizando la anotación "@RunWith(SpringRunner.class)" para indicar que queremos ejecutar las pruebas utilizando el contexto de Spring. También utilizamos la anotación "@SpringBootTest" para indicar que queremos cargar el contexto completo de la aplicación Spring Boot para nuestras pruebas.</p>
</div>
<div class="paragraph">
<p>Luego, en el método de prueba "testGetUserById", utilizamos la anotación "@Autowired" para inyectar la instancia de UserService en la prueba. Luego, llamamos al método "getUserById" y realizamos algunas aserciones para comprobar que el objeto User devuelto por el método es el correcto.</p>
</div>
<div class="sect3">
<h4 id="_la_sintaxis_de_las_pruebas_unitarias_con_junit">La sintaxis de las pruebas unitarias con JUnit</h4>
<div class="paragraph">
<p>JUnit es un framework de testing para aplicaciones Java, que permite realizar pruebas unitarias de manera sencilla y eficiente.</p>
</div>
<div class="ulist">
<div class="title">A continuación un resumen de la sintaxis básica de JUnit:</div>
<ul>
<li>
<p><strong>Anotaciones</strong>: JUnit utiliza una serie de anotaciones para marcar los métodos de prueba y proporcionar información adicional sobre las pruebas.</p>
<div class="ulist">
<ul>
<li>
<p><strong>@Test</strong>: Indica que un método es una prueba unitaria.</p>
</li>
<li>
<p><strong>@Disabled</strong>: Indica que un método de prueba debe desactivarse.</p>
</li>
<li>
<p><strong>@DisplayName</strong>: Indica el nombre de la prueba.</p>
</li>
<li>
<p><strong>@Order</strong>: Indica el orden de ejecución de las pruebas.</p>
</li>
<li>
<p><strong>@Tag</strong>: Indica una o más etiquetas para la prueba.</p>
</li>
<li>
<p><strong>@Nested</strong>: Indica que una clase es una clase anidada de pruebas.</p>
</li>
<li>
<p><strong>@BeforeEach</strong>: Indica que un método debe ejecutarse antes de cada prueba.</p>
</li>
<li>
<p><strong>@AfterEach</strong>: Indica que un método debe ejecutarse después de cada prueba.</p>
</li>
<li>
<p><strong>@BeforeClass</strong>: Indica que un método debe ejecutarse antes de que se ejecuten todas las pruebas en una clase.</p>
</li>
<li>
<p><strong>@AfterClass</strong>: Indica que un método debe ejecutarse después de que se ejecuten todas las pruebas en una clase.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Asserts</strong>: JUnit proporciona una serie de métodos Assert para verificar que los resultados de las pruebas sean los esperados. Los métodos más comunes son:</p>
<div class="ulist">
<ul>
<li>
<p><strong>assertEquals:</strong> Compara dos valores y verifica que sean iguales.</p>
</li>
<li>
<p><strong>assertTrue/assertFalse</strong>: Verifica si una condición es verdadera o falsa.</p>
</li>
<li>
<p><strong>assertNull/assertNotNull</strong>: Verifica si un objeto es nulo o no nulo.</p>
</li>
<li>
<p><strong>assertSame/assertNotSame</strong>: Verifica si dos objetos son iguales o no iguales.</p>
</li>
<li>
<p><strong>assertArrayEquals:</strong> Compara dos matrices y verifica que sean iguales.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Runners</strong>: JUnit utiliza runners para ejecutar las pruebas. Los runners más comunes son:</p>
<div class="ulist">
<ul>
<li>
<p><strong>JUnitCore:</strong> Ejecuta las pruebas en la consola.</p>
</li>
<li>
<p><strong>JUnit4:</strong> Ejecuta las pruebas utilizando el runner predeterminado de JUnit 4.</p>
</li>
<li>
<p><strong>SpringRunner:</strong> Ejecuta las pruebas utilizando el runner de Spring Test Framework.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>A partir de JUnit 4, se puede seleccionar el runner que se utilizará para ejecutar las pruebas utilizando la anotación @RunWith. Por ejemplo, si queremos ejecutar las pruebas utilizando el runner de Spring Test Framework, podemos utilizar la anotación @RunWith(SpringRunner.class).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pruebas_de_integración_con_spring_test_framework">Pruebas de integración con Spring Test Framework</h3>
<div class="paragraph">
<p>En Spring Boot, las pruebas de integración se realizan utilizando el framework Spring Test, que permite cargar el contexto de la aplicación y realizar pruebas de extremo a extremo.</p>
</div>
<div class="paragraph">
<p>Para realizar pruebas de integración en Spring Boot se crea una clase de prueba que carga el contexto de la aplicación y se configura el entorno de prueba utilizando anotaciones como @TestPropertySource y @ActiveProfiles. Se pueden inyectar dependencias utilizando @Autowired o @MockBean y se realizan pruebas utilizando los métodos de aserción de JUnit o herramientas adicionales como MockMvc.</p>
</div>
<div class="listingblock">
<div class="title">Crear una clase de prueba: Para realizar pruebas de integración en Spring Boot, se crea una clase de prueba en la que se anota con la anotación @RunWith(SpringRunner.class), que indica que se utilizará el runner de Spring Test.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunWith(SpringRunner.class)
@SpringBootTest
public class MyIntegrationTest {
   // Aquí van los métodos de prueba
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Cargar el contexto de la aplicación: Para cargar el contexto de la aplicación en la clase de prueba, se utiliza la anotación @SpringBootTest, que indica que se debe cargar la configuración completa de la aplicación.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SpringBootTest
public class MyIntegrationTest {
   // Aquí van los métodos de prueba
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configurar el entorno de prueba: Para configurar el entorno de prueba, se pueden utilizar las anotaciones @TestPropertySource y @ActiveProfiles. La anotación @TestPropertySource permite cargar propiedades específicas para la prueba, mientras que la anotación @ActiveProfiles permite activar perfiles específicos de la aplicación.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SpringBootTest
@TestPropertySource(locations="classpath:test.properties")
@ActiveProfiles("test")
public class MyIntegrationTest {
   // Aquí van los métodos de prueba
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Inyectar dependencias: Para acceder a los componentes de la aplicación, se pueden inyectar dependencias utilizando la anotación @Autowired o @MockBean. La anotación @Autowired permite inyectar una instancia real del componente, mientras que la anotación @MockBean permite inyectar un objeto simulado para pruebas.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SpringBootTest
public class MyIntegrationTest {
   @Autowired
   private MyService myService;

   @MockBean
   private MyRepository myRepository;

   // Aquí van los métodos de prueba
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Realizar pruebas: Una vez que se ha configurado el entorno de prueba y se han inyectado las dependencias necesarias, se pueden realizar pruebas utilizando los métodos de aserción de JUnit o herramientas adicionales como MockMvc.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SpringBootTest
public class MyIntegrationTest {
   @Autowired
   private MyService myService;

   @MockBean
   private MyRepository myRepository;

   @Test
   @Order(1)
   public void testMyService() {
      // Configurar comportamiento simulado del repositorio
      when(myRepository.findByName("foo")).thenReturn(new MyEntity("foo", 123));

      // Llamar al servicio y verificar resultado
      MyEntity result = myService.findByName("foo");
      assertEquals(result.getName(), "foo");
      assertEquals(result.getValue(), 123);
   }

   @Test
   @Order(2)
    public void testMyController() {
        // Configurar comportamiento simulado del servicio
        when(myService.findByName("foo")).thenReturn(new MyEntity("foo", 123));

        // Llamar al controlador y verificar resultado
        mockMvc.perform(get("/foo"))
            .andExpect(status().isOk())
            .andExpect(jsonPath("$.name", is("foo")))
            .andExpect(jsonPath("$.value", is(123)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mockito">Mockito</h3>
<div class="paragraph">
<p>Mockito es un framework de pruebas que permite crear objetos simulados para realizar pruebas unitarias.</p>
</div>
<div class="ulist">
<div class="title">Los elementos que conforman un objeto simulado son:</div>
<ul>
<li>
<p><strong>Mock</strong>: es el objeto simulado que se utiliza para realizar pruebas unitarias.</p>
</li>
<li>
<p><strong>Stub</strong>: se utiliza para configurar el comportamiento de un mock.</p>
<div class="ulist">
<ul>
<li>
<p><strong>when</strong>: se utiliza para configurar el comportamiento de un mock.</p>
</li>
<li>
<p><strong>thenReturn</strong>: se utiliza para configurar el valor de retorno de un mock.</p>
</li>
<li>
<p><strong>thenThrow</strong>: se utiliza para configurar una excepción que se lanzará cuando se llame a un método de un mock.</p>
</li>
<li>
<p><strong>thenAnswer</strong>: se utiliza para configurar una respuesta personalizada cuando se llame a un método de un mock.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Spy</strong>: se utiliza para realizar pruebas unitarias sobre un objeto real.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Para utilizar Mockito en una aplicación Spring Boot, es necesario añadir la siguiente dependencia:</p>
</div>
<div class="listingblock">
<div class="title">Con Maven, en el archivo pom.xml:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.mockito&lt;/groupId&gt;
  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
  &lt;version&gt;2.23.4&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Con Gradle, en el archivo build.gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">testCompile group: 'org.mockito', name: 'mockito-core', version: '2.23.4'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Añadir dependencia: Para utilizar Mockito en una prueba unitaria, es necesario añadir la siguiente dependencia en el archivo pom.xml:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.mockito&lt;/groupId&gt;
  &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
  &lt;version&gt;2.23.4&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear un objeto simulado: Para crear un objeto simulado, se utiliza el método estático mock de la clase Mockito.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">MyService myService = mock(MyService.class);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configurar comportamiento simulado: Para configurar el comportamiento simulado de un objeto simulado, se utiliza el método when de la clase Mockito.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">when(myService.findByName("foo")).thenReturn(new MyEntity("foo", 123));</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Verificar llamadas: Para verificar que se ha llamado a un método de un objeto simulado, se utiliza el método verify de la clase Mockito.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">verify(myService).findByName("foo");</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_mockito_con_spring_boot">Mockito con Spring Boot</h4>
<div class="listingblock">
<div class="title">Un ejemplo de una clase de testing con Mockito en Spring Boot:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunWith(SpringRunner.class)
@SpringBootTest

public class MyServiceTest {
   @MockBean
   private MyRepository myRepository;

   @Autowired
   private MyService myService;

   @Mock
    private MyEntity myEntity;

   @Test
   public void testMyService() {
      // Configurar comportamiento simulado del repositorio
      when(myRepository.findByName("foo")).thenReturn(new MyEntity("foo", 123));

      // Llamar al servicio y verificar resultado
      MyEntity result = myService.findByName("foo");
      assertEquals(result.getName(), "foo");
      assertEquals(result.getValue(), 123);

      // Verificar myEntity
      assertNotNull(myEntity);
      assertEquals(myEntity.getName(), "foo");

   }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear una instancia de Mockito dentro de un método de prueba:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyClassTest {

    private MyClass myClass;

    @Before
    public void before() throw Exception {
        Mockito.initMocks(this);
        myObject = Mockito.mock(MyClass.class);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear una instancia de Mockito con un objeto simulado:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyClassTest {

    private MyClass myClass;

    @Before
    public void before() throw Exception {
        Mockito.initMocks(this);
        myObject = Mockito.mock(MyClass.class);
        myObject = Mockito.mock(MyClass.class, Mockito.RETURNS_DEEP_STUBS);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear un spy de Mockito:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyClassTest {

    @Spy
    private MyClass myObject;

    @Before
    public void before() throw Exception {
        Mockito.initMocks(this);
        // myObject is now a spy
    }
    // ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear un spy de Mockito con un objeto simulado:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyClassTest {

    @Spy
    private MyClass myObject;

    @Before
    public void before() throw Exception {
        Mockito.initMocks(this);
        myObject = Mockito.mock(MyClass.class, Mockito.RETURNS_DEEP_STUBS);
        // myObject is now a spy
    }
    // ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear un spy de Mockito dentro de un método:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyClassTest {

    private MyClass myObject;

    @Before
    public void before() throw Exception {
        Mockito.initMocks(this);
        myObject = Mockito.spy(MyClass.class);
    }
    // ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Stub de Mockito para un método:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testMyService() {
    // Configurar comportamiento simulado del repositorio
    when(myRepository.findByName("foo")).thenReturn(new MyEntity("foo", 123));
    // Comprobar que se ha llamado al método
    assertEquals(myRepository.findByName("foo").getName(), "foo");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Stub para hacer una implementación alternativa de un método:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testMyService() {
    // Configurar comportamiento simulado del repositorio
    when(myRepository.findByName("foo")).thenAnswer(new Answer&lt;MyEntity&gt;() {
        @Override
        public MyEntity answer(InvocationOnMock invocation) throws Throwable {
            return new MyEntity("foo", 123);
        }
    });
    // Comprobar que se ha llamado al método
    assertEquals(myRepository.findByName("foo").getName(), "foo");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Stub para lanzar una excepción:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test(expected = MyException.class)
public void testMyService() {
    // Configurar comportamiento simulado del repositorio
    when(myRepository.findByName("foo")).thenThrow(new MyException());
    // Comprobar que se ha llamado al método
    assertEquals(myRepository.findByName("foo").getName(), "foo");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Stub para llamar a un método real:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testMyService() {
    // Configurar comportamiento simulado del repositorio
    when(myRepository.findByName("foo")).thenCallRealMethod();
    // Comprobar que se ha llamado al método
    assertEquals(myRepository.findByName("foo").getName(), "foo");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Verificar que un stub se ha llamado:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testMyService() {
    // Configurar comportamiento simulado del repositorio
    when(myRepository.findByName("foo")).thenReturn(new MyEntity("foo", 123));
    // Comprobar que se ha llamado al método
    assertEquals(myRepository.findByName("foo").getName(), "foo");
    verify(myRepository).findByName("foo");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de matcher de Mockito:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testMyService() {
    // Configurar comportamiento simulado del repositorio
    when(myRepository.findByName(anyString())).thenReturn(new MyEntity("foo", 123));
    // Comprobar que se ha llamado al método
    assertEquals(myRepository.findByName("foo").getName(), "foo");
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de any() de Mockito:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void testMyService() {
    // Configurar comportamiento simulado del repositorio
    when(myRepository.findByName(any())).thenReturn(new MyEntity("foo", 123));
    // Comprobar que se ha llamado al método
    assertEquals(myRepository.findByName("foo").getName(), "foo");
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pruebas_de_aceptación_con_selenium">Pruebas de aceptación con Selenium</h3>
<div class="paragraph">
<p>Para realizar pruebas de aceptación en Spring Boot con Selenium, se necesita configurar el entorno de prueba con una clase de prueba que cargue el contexto de Spring Boot y utilizar métodos de Selenium para interactuar con la interfaz de usuario y verificar el resultado de las pruebas.</p>
</div>
<div class="paragraph">
<p>Para realizar pruebas de aceptación en Spring Boot con Selenium, se pueden seguir los siguientes pasos:</p>
</div>
<div class="listingblock">
<div class="title">Añadir dependencias: Para utilizar Selenium en una aplicación Spring Boot, es necesario añadir las siguientes dependencias en el archivo pom.xml:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;
  &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;
  &lt;version&gt;3.141.59&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;
  &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;
  &lt;version&gt;3.141.59&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Crear una clase de prueba: Se crea una clase de prueba JUnit para realizar las pruebas de aceptación. Se utiliza la anotación @RunWith(SpringRunner.class) para cargar el contexto de Spring Boot y la anotación @SpringBootTest para indicar que se deben cargar todas las configuraciones de la aplicación.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class MyAcceptanceTest {
   // Aquí van los métodos de prueba
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Configurar el entorno de prueba: Se utiliza la anotación @LocalServerPort para obtener el puerto aleatorio que se utiliza en la aplicación y la anotación @Before para crear el objeto WebDriver que se utilizará en las pruebas.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class MyAcceptanceTest {
   @LocalServerPort
   private int port;

   private WebDriver driver;

   @Before
   public void setUp() {
      driver = new ChromeDriver();
   }

   // Aquí van los métodos de prueba
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Realizar pruebas: Se utilizan los métodos de Selenium para interactuar con la interfaz de usuario y verificar el resultado de las pruebas.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
public class MyAcceptanceTest {
   @LocalServerPort
   private int port;

   private WebDriver driver;

   @BeforeEach
   public void setUp() {
      driver = new ChromeDriver();
   }

   @AfterEach
   public void tearDown() {
      driver.quit();
   }

   @Test
   public void testMyPage() {
      // Abrir la página y verificar título
      driver.get("http://localhost:" + port + "/my-page");
      assertEquals("My Page", driver.getTitle());

      // Rellenar formulario y enviar
      WebElement input = driver.findElement(By.id("my-input"));
      input.sendKeys("foo");
      WebElement submit = driver.findElement(By.id("my-submit"));
      submit.click();

      // Verificar resultado
      WebElement result = driver.findElement(By.id("my-result"));
      assertEquals("foo", result.getText());
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pruebas_de_rendimiento_en_spring_boot">Pruebas de rendimiento en Spring Boot</h3>
<div class="paragraph">
<p>Las pruebas de rendimiento en Spring Boot se realizan para evaluar el comportamiento de una aplicación bajo diferentes cargas de trabajo y para identificar cuellos de botella y áreas de mejora en términos de rendimiento. A continuación, se describen los pasos generales para realizar pruebas de rendimiento en Spring Boot:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Identificar los casos de uso</strong>: Identificar los casos de uso de la aplicación que se desean probar y crear los escenarios correspondientes para simular diferentes cargas de trabajo. Por ejemplo, se puede simular el acceso simultáneo a la aplicación de cientos de usuarios, realizar solicitudes de alta carga en la base de datos o enviar solicitudes de red pesadas.</p>
</li>
<li>
<p><strong>Preparar los datos</strong>: Preparar los datos necesarios para las pruebas, como los datos de usuario, los datos de prueba de la base de datos, etc. Asegurarse de que los datos estén limpios y sean coherentes para obtener resultados precisos y confiables.</p>
</li>
<li>
<p><strong>Configuración del entorno</strong>: Configurar el entorno para realizar las pruebas, que incluye la configuración del servidor de aplicaciones, la configuración de la base de datos, la configuración de la red, etc.</p>
</li>
<li>
<p><strong>Ejecutar las pruebas</strong>: Ejecutar las pruebas con la ayuda de herramientas de pruebas de rendimiento, como JMeter, Gatling, Apache Bench, etc. En estas pruebas, se simula la carga de trabajo para el escenario de prueba correspondiente y se miden diferentes parámetros, como el tiempo de respuesta, la tasa de errores, la carga de CPU, la memoria y el rendimiento de la base de datos.</p>
</li>
<li>
<p><strong>Analizar los resultados</strong>: Analizar los resultados de las pruebas para identificar áreas problemáticas en la aplicación y determinar cómo se pueden mejorar. Estos resultados también se pueden utilizar para establecer umbrales de rendimiento y comparar el rendimiento con versiones anteriores de la aplicación.</p>
</li>
<li>
<p><strong>Optimización y ajuste</strong>: Utilizar los resultados de las pruebas para optimizar y ajustar la aplicación para mejorar el rendimiento. Esto puede implicar ajustar la configuración del servidor, ajustar la configuración de la base de datos, optimizar el código, etc.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_librerías_importantes_de_spring_boot">Librerías importantes de Spring Boot</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_lombok">Lombok</h3>
<div class="paragraph">
<p>Lombok es una librería de código abierto que se utiliza para reducir la cantidad de código que se necesita escribir en Java. Lombok se utiliza para generar automáticamente código como getters, setters, constructores, toString, hashCode, equals, etc. Lombok se puede utilizar en proyectos de Spring Boot para reducir la cantidad de código que se necesita escribir para las entidades de base de datos, los modelos de datos, los controladores, etc.</p>
</div>
<div class="listingblock">
<div class="title">Para añadir Lombok usando maven, hay que incluir en el archivo pom.xml:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
  &lt;artifactId&gt;lombok&lt;/artifactId&gt;
  &lt;version&gt;1.18.26&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para añadir Lombok usando Gradle, hay que incluir en el archivo build.gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
  compileOnly 'org.projectlombok:lombok:1.18.26'
  annotationProcessor 'org.projectlombok:lombok:1.18.26'
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_anotaciones_de_lombok">Anotaciones de Lombok</h4>
<div class="ulist">
<div class="title">A continuación, se muestran algunas de las anotaciones de Lombok más utilizadas:</div>
<ul>
<li>
<p><strong>@Getter</strong> y <strong>@Setter</strong>: generan los métodos getter y setter para los campos de una clase.</p>
</li>
<li>
<p><strong>@ToString</strong>: genera un método toString() para una clase, que devuelve una cadena que representa el objeto.</p>
</li>
<li>
<p><strong>@EqualsAndHashCode</strong>: genera los métodos equals() y hashCode() para una clase, basados en los campos de la clase.</p>
</li>
<li>
<p><strong>@Data</strong>: combina las anotaciones @Getter, @Setter, @EqualsAndHashCode y @ToString en una sola anotación.</p>
</li>
<li>
<p><strong>@NoArgsConstructor</strong> y <strong>@AllArgsConstructor</strong>: generan constructores sin argumentos o con todos los argumentos.</p>
</li>
<li>
<p><strong>@RequiredArgsConstructor</strong>: Genera automáticamente un constructor con argumentos solo para los campos marcados con la anotación @NonNull.</p>
</li>
<li>
<p><strong>@Builder</strong>: crea un constructor de objetos que permite construir objetos utilizando un patrón de diseño builder.</p>
</li>
<li>
<p><strong>@Log</strong>, <strong>@Log4j</strong>, <strong>@Log4j2</strong>, <strong>@Slf4j</strong>, <strong>@CommonsLog</strong>, <strong>@JBossLog</strong>, <strong>@Flogger</strong>, <strong>@XSlf4j</strong>: Generan un registro de eventos para un método utilizando la implementación de registro especificada.</p>
</li>
<li>
<p><strong>@NonNull</strong>: genera automáticamente una excepción si el valor es nulo, se puede usar en parámetros de métodos, campos y constructores. Esta anotación también se puede utilizar con @RequiredArgsConstructor para generar un constructor con argumentos solo para los campos marcados con @NonNull.</p>
</li>
<li>
<p><strong>@Cleanup</strong>: cierra automáticamente un recurso como un archivo o una conexión de base de datos, cuando el objeto que lo contiene sale del ámbito.</p>
</li>
<li>
<p><strong>@SneakyThrows</strong>: esta anotación permite lanzar excepciones comprobadas sin tener que declararlas en la firma del método.</p>
</li>
<li>
<p><strong>@Value</strong>: Similar a <strong>@Data</strong>, pero hace que la clase sea inmutable.</p>
</li>
<li>
<p><strong>@Builder</strong>: Genera automáticamente un constructor de objetos y un builder para una clase.</p>
</li>
<li>
<p><strong>@Singular</strong>: Usado junto con @Builder para crear un builder que acepte colecciones.</p>
</li>
<li>
<p><strong>@Synchronized</strong>: Genera automáticamente un bloque synchronized para un método o un bloque de código.</p>
</li>
<li>
<p><strong>@Accessors</strong>: Permite personalizar la forma en que se generan los métodos getter y setter para los campos de una clase.</p>
<div class="ulist">
<ul>
<li>
<p><strong>fluent</strong>: Un valor booleano que indica si los métodos generados deben seguir el estilo de codificación "fluent" o "chainable".</p>
</li>
<li>
<p><strong>prefix</strong>: Un prefijo que se agregará al nombre del campo para generar los nombres de los métodos de acceso.</p>
</li>
<li>
<p><strong>chain</strong>: Un valor booleano que indica si los métodos generados deben devolver el objeto de la clase en lugar de void.</p>
</li>
<li>
<p><strong>fluentAndChain</strong>: Un valor booleano que indica si los métodos generados deben ser fluentes y encadenables.</p>
</li>
<li>
<p><strong>lazy</strong>: Un valor booleano que indica si los métodos generados deben ser perezosos (lazy) o no.</p>
</li>
<li>
<p><strong>suppressAccessors</strong>: Un valor booleano que indica si se deben generar los métodos de acceso para los campos de la clase.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>@Wither</strong>: Genera automáticamente un método que devuelve una nueva instancia de la clase con un campo específico modificado.</p>
</li>
<li>
<p><strong>@Delegate</strong>: Permite delegar ciertos métodos a un objeto de otra clase.</p>
</li>
<li>
<p><strong>@UtilityClass</strong>: Hace que la clase se convierta en una clase de utilidad con un constructor privado y sin campos.</p>
</li>
<li>
<p><strong>@FieldNameConstants</strong>: Genera una clase con constantes de cadenas que representan los nombres de los campos de la clase.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Ejemplo de la anotación @Cleanup:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Cleanup;

import java.io.*;

public class EjemploClase {
  public static void main(String[] args) throws IOException {
    @Cleanup InputStream in = new FileInputStream(args[0]);
    @Cleanup OutputStream out = new FileOutputStream(args[1]);
    byte[] b = new byte[10000];
    while (true) {
      int r = in.read(b);
      if (r == -1) break;
      out.write(b, 0, r);
    }
  }
}

// Equivalente a:

public class EjemploClase {
  public static void main(String[] args) throws IOException {
    InputStream in = new FileInputStream(args[0]);
    try {
      OutputStream out = new FileOutputStream(args[1]);
      try {
        byte[] b = new byte[10000];
        while (true) {
          int r = in.read(b);
          if (r == -1) break;
          out.write(b, 0, r);
        }
      } finally {
        if (out != null) {
          out.close();
        }
      }
    } finally {
      if (in != null) {
        in.close();
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de la anotación @Delegate y @UtilityClass:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.experimental.Delegate;
import lombok.experimental.UtilityClass;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

@UtilityClass
public class EjemploClase {
  @Delegate
  private final List&lt;String&gt; list = new ArrayList&lt;&gt;();
}

EjemploClase ejemploClase = new EjemploClase();
ejemploClase.add("uno");
ejemploClase.add("dos");
ejemploClase.add("tres");
System.out.println(ejemploClase.size());
System.out.println(ejemploClase.get(1));</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de la anotación @Builder, @Singular y @NonNull:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Builder;
import lombok.NonNull;
import lombok.Singular;

import java.util.Set;

@Builder
public class EjemploClase {
  @NonNull
  private String nombre;
  @NonNull
  private int edad;
  @Singular
  private Set&lt;String&gt; emails;
}

EjemploClase ejemploClase = EjemploClase.builder()
  .nombre("John Doe")
  .edad(30)
  .email("uno@cualquiera.com")
  .email("otro@cualquiera.com")
.build();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de la anotación @Accessors:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.AccessLevel;
import lombok.experimental.Accessors;

@Accessors(fluent = true, chain = true, prefix = "set")
public class EjemploClase {
  private String nombre;
  private int edad;
}

EjemploClase ejemploClase = new EjemploClase();
ejemploClase.setNombre("John Doe").setEdad(30);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de uso de Lombok:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.*;

@Data
@Builder
@NoArgsConstructor
@AllArgsConstructor
@ToString(callSuper=true, includeFieldNames=true)
@EqualsAndHashCode(callSuper=true)
public class EjemploClase {
 @Getter(AccessLevel.PUBLIC)
 @Setter(AccessLevel.PUBLIC)
 private String nombre;

 @Getter(AccessLevel.PUBLIC)
 @Setter(AccessLevel.PUBLIC)
 private int edad;

 @NonNull
 @Getter(AccessLevel.PUBLIC)
 private String email;

 @Cleanup
 private InputStream inputStream;

 @SneakyThrows
 public void metodoQueLanzaExcepcion() {
   throw new Exception("¡Ups, algo salió mal!");
 }
 @Log
 public void metodoQueImprimeLog() {
   System.out.println("Este método está siendo registrado en el sistema de log.");
 }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">El ejemplo anterior genera el siguiente código:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class EjemploClase {
 private String nombre;
 private int edad;
 private String email;
 private InputStream inputStream;

 public EjemploClase() {
 }

 public EjemploClase(String nombre, int edad, String email, InputStream inputStream) {
   this.nombre = nombre;
   this.edad = edad;
   this.email = email;
   this.inputStream = inputStream;
 }

 public String getNombre() {
   return this.nombre;
 }

 public void setNombre(String nombre) {
   this.nombre = nombre;
 }

 public int getEdad() {
   return this.edad;
 }

 public void setEdad(int edad) {
   this.edad = edad;
 }

 public String getEmail() {
   return this.email;
 }

 public InputStream getInputStream() {
   return this.inputStream;
 }

 public void setInputStream(InputStream inputStream) {
   this.inputStream = inputStream;
 }

 public boolean equals(final Object o) {
   if (o == this) return true;
   if (!(o instanceof EjemploClase)) return false;
   final EjemploClase other = (EjemploClase) o;
   if (!other.canEqual((Object) this)) return false;
   final Object this$nombre = this.getNombre();
   final Object other$nombre = other.getNombre();
   if (this$nombre == null ? other$nombre != null : !this$nombre.equals(other$nombre)) return false;
   if (this.getEdad() != other.getEdad()) return false;
   final Object this$email = this.getEmail();
   final Object other$email = other.getEmail();
   if (this$email == null ? other$email != null : !this$email.equals(other$email)) return false;
   final Object this$inputStream = this.getInputStream();
   final Object other$inputStream = other.getInputStream();
   if (this$inputStream == null ? other$inputStream != null : !this$inputStream.equals(other$inputStream))
     return false;
   return true;
 }

 protected boolean canEqual(final Object other) {
   return other instanceof EjemploClase;
 }

 public int hashCode() {
   final int PRIME = 59;
   int result = 1;
   final Object $nombre = this.getNombre();
   result = result * PRIME + ($nombre == null ? 43 : $nombre.hashCode());
   result = result * PRIME + this.getEdad();
   final Object $email = this.getEmail();
   result = result * PRIME + ($email == null ? 43 : $email.hashCode());
    final Object $inputStream = this.getInputStream();
    result = result * PRIME + ($inputStream == null ? 43 : $inputStream.hashCode());
    return result;
    }

    public String toString() {
      return "EjemploClase(nombre=" + this.getNombre() + ", edad=" + this.getEdad() + ", email=" + this.getEmail() + ", inputStream=" + this.getInputStream() + ")";
    }

    public void metodoQueLanzaExcepcion() {
      try {
        throw new Exception("¡Ups, algo salió mal!");
      } catch (final Throwable $ex) {
        throw new RuntimeException($ex);
      }
    }

    public void metodoQueImprimeLog() {
      EjemploClase.log.info("Este método está siendo registrado en el sistema de log.");
    }

    private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(EjemploClase.class);
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_referencias_de_lombok">Referencias de Lombok</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://projectlombok.org/" class="bare">https://projectlombok.org/</a></p>
</li>
<li>
<p><a href="https://projectlombok.org/features/all" class="bare">https://projectlombok.org/features/all</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapstruct">MapStruct</h3>
<div class="paragraph">
<p>MapStruct es una herramienta de generación de código que ayuda a mapear objetos entre diferentes modelos de datos en una aplicación Java. Básicamente, MapStruct genera automáticamente el código de mapeo para convertir un objeto de un tipo en otro.</p>
</div>
<div class="listingblock">
<div class="title">Para importar MapStruct en un proyecto Maven:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;
    &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;
    &lt;version&gt;1.5.5.Final&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para importar MapStruct en un proyecto Gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
    implementation 'org.mapstruct:mapstruct:1.5.5.Final'
    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_un_ejemplo_de_uso_de_mapstruct">Un ejemplo de uso de MapStruct:</h4>
<div class="listingblock">
<div class="title">Partimos de una clase de tipo Entity:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@Table(name = "personas")
public class PersonaEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String nombre;
    private String apellido;
    private String email;
    private String telefono;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para convertir esta clase en una clase de tipo DTO, creamos una clase de tipo DTO:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class PersonaDTO {
    private Long id;
    private String nombre;
    private String apellido;
    private String email;
    private String telefono;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para convertir la clase de tipo Entity en una clase de tipo DTO, creamos una interfaz de tipo Mapper:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mapper(componentModel = "spring")
public interface PersonaMapper {
    PersonaMapper INSTANCE = Mappers.getMapper(PersonaMapper.class);
    PersonaDTO personaEntityToPersonaDTO(PersonaEntity personaEntity);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">En un servicio, podemos usar el Mapper para convertir una clase de tipo Entity en una clase de tipo DTO:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class PersonaService {
    @Autowired
    private PersonaRepository personaRepository;

    @Autowired
    private PersonaMapper personaMapper;

    public PersonaDTO getPersonaById(Long id) {
        PersonaEntity personaEntity = personaRepository.findById(id).orElse(null);
        return personaMapper.personaEntityToPersonaDTO(personaEntity);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_referencias_de_mapstruct">Referencias de MapStruct</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://mapstruct.org/" class="bare">https://mapstruct.org/</a></p>
</li>
<li>
<p><a href="https://mapstruct.org/documentation/stable/reference/html/" class="bare">https://mapstruct.org/documentation/stable/reference/html/</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modelmapper">ModelMapper</h3>
<div class="paragraph">
<p>ModelMapper es una librería de mapeo de objetos en Spring Boot que simplifica la conversión de objetos entre diferentes modelos de dominio. En lugar de realizar la conversión manualmente, ModelMapper mapea automáticamente los campos correspondientes de los objetos origen y destino.</p>
</div>
<div class="listingblock">
<div class="title">Para importar ModelMapper en un proyecto Maven:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;
    &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;
    &lt;version&gt;2.4.4&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para importar ModelMapper en un proyecto Gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
    implementation 'org.modelmapper:modelmapper:2.4.4'
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_un_ejemplo_de_uso_de_modelmapper">Un ejemplo de uso de ModelMapper:</h4>
<div class="listingblock">
<div class="title">Partimos de una clase de tipo Entity:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String firstName;
    private String lastName;
    private String email;
    // Getters y Setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para convertir esta clase en una clase de tipo DTO, creamos una clase de tipo DTO:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class UserDTO {
    private Long id;
    private String firstName;
    private String lastName;
    private String email;
    // Getters y Setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">En el servicio, podemos usar ModelMapper para convertir una clase de tipo Entity en una clase de tipo DTO:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;
    @Autowired
    private ModelMapper modelMapper;

    public UserDto getUserById(Long id) {
        User user = userRepository.findById(id).orElse(null);
        if (user == null) {
            return null;
        }
        return modelMapper.map(user, UserDto.class);
    }

    public User saveUser(UserDto userDto) {
        User user = modelMapper.map(userDto, User.class);
        return userRepository.save(user);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En este ejemplo, el método getUserById() busca un usuario en la base de datos y lo convierte en un objeto UserDto utilizando el método map() de ModelMapper. Por otro lado, el método saveUser() recibe un objeto UserDto, lo convierte en un objeto User utilizando ModelMapper y lo guarda en la base de datos utilizando UserRepository.</p>
</div>
</div>
<div class="sect3">
<h4 id="_referencias_de_modelmapper">Referencias de ModelMapper</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://modelmapper.org/" class="bare">https://modelmapper.org/</a></p>
</li>
<li>
<p><a href="https://modelmapper.org/getting-started/" class="bare">https://modelmapper.org/getting-started/</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_actuator">Actuator</h3>
<div class="paragraph">
<p>Actuator es una herramienta que nos permite monitorear y administrar nuestra aplicación Spring Boot. Actuator nos permite obtener información sobre el estado de nuestra aplicación, como por ejemplo, el estado de los hilos, el estado de la memoria, el estado de la caché, etc.</p>
</div>
<div class="listingblock">
<div class="title">Para importar Actuator en un proyecto Maven:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para importar Actuator en un proyecto Gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_un_ejemplo_de_uso_de_actuator">Un ejemplo de uso de Actuator:</h4>
<div class="listingblock">
<div class="title">Para habilitar Actuator, debemos agregar la siguiente línea en el archivo application.properties:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">management.endpoints.web.exposure.include=*</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Algunos de los endpoints que proporciona Actuator son:</div>
<ul>
<li>
<p><strong>/actuator/health</strong>: información sobre el estado de salud de la aplicación.</p>
</li>
<li>
<p><strong>/actuator/metrics</strong>: métricas sobre el uso de recursos de la aplicación, como CPU y memoria.</p>
</li>
<li>
<p><strong>/actuator/env</strong>: información sobre las variables de entorno utilizadas por la aplicación.</p>
</li>
<li>
<p><strong>/actuator/info</strong>: información personalizada sobre la aplicación.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La respuesta será un objeto JSON con información sobre las métricas de la aplicación. Estas métricas pueden ser consumidas por herramientas de monitoreo y análisis para obtener información valiosa sobre el rendimiento y la salud de la aplicación.</p>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de respuesta de Actuator para el endpoint <strong>/actuator/metrics</strong>:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "names": [
    "jvm.buffer.memory.used",
    "jvm.buffer.count",
    "jvm.buffer.total.capacity",
    "jvm.classes.loaded",
    "jvm.classes.unloaded",
    "jvm.gc.max.data.size",
    "jvm.gc.memory.allocated",
    "jvm.gc.memory.promoted",
    "jvm.gc.pause",
    "jvm.memory.committed",
    "jvm.memory.max",
    "jvm.memory.used",
    "jvm.threads.daemon",
    "jvm.threads.live",
    "jvm.threads.peak",
    "jvm.threads.states",
    "logback.events",
    "process.cpu.usage",
    "process.files.max",
    "process.files.open",
    "process.start.time",
    "process.uptime",
    "system.cpu.count",
    "system.cpu.usage",
    "system.load.average.1m",
    "tomcat.global.error",
    "tomcat.global.request.max",
    "tomcat.global.request",
    "tomcat.sessions.active.max",
    "tomcat.sessions.active",
    "tomcat.sessions.alive.max",
    "tomcat.sessions.alive",
    "tomcat.sessions.expired",
    "tomcat.sessions.rejected",
    "tomcat.threads.config.max",
    "tomcat.threads.config",
    "tomcat.threads.current",
    "tomcat.threads.busy"
  ],
  "jvm.buffer.memory.used": {
    "description": "An estimate of the memory that the Java virtual machine is using for this buffer pool",
    "baseUnit": "bytes",
    "measurements": [
      {
        "statistic": "VALUE",
        "value": 0.0
      }
    ],
    "availableTags": []
  },
  "jvm.buffer.count": {
    "description": "An estimate of the number of buffers in the pool",
    "baseUnit": "buffers",
    "measurements": [
      {
        "statistic": "VALUE",
        "value": 0.0
      }
    ],
    "availableTags": []
  },
  "jvm.buffer.total.capacity": {
    "description": "An estimate of the total capacity of the buffers in this pool",
    "baseUnit": "bytes",
    "measurements": [
      {
        "statistic": "VALUE",
        "value": 0.0
        }
    ],
    "availableTags": []
    },
    "jvm.classes.loaded": {
      "description": "The number of classes that are currently loaded in the Java virtual machine",
      "baseUnit": "classes",
      "measurements": [
        {
          "statistic": "VALUE",
          "value": 10086.0
        }
      ],
      "availableTags": []
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gradle">Gradle</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introducción">Introducción</h3>
<div class="paragraph">
<p>Gradle es una herramienta de automatización de construcción de código abierto que se basa en los conceptos de Apache Ant y Apache Maven e introduce un lenguaje específico del dominio (DSL) basado en Groovy en lugar de la forma XML utilizada por Apache Maven para declarar la configuración del proyecto.</p>
</div>
<div class="paragraph">
<p>La configuración de Gradle se escribe en un archivo llamado build.gradle. Este archivo contiene las instrucciones para construir el proyecto.</p>
</div>
<div class="ulist">
<div class="title">build.gradle contiene:</div>
<ul>
<li>
<p>plugins: para agregar funcionalidades a los proyectos.</p>
</li>
<li>
<p>tareas: para ejecutar acciones en los proyectos.</p>
</li>
<li>
<p>dependencias: para gestionar las dependencias de los proyectos.</p>
</li>
<li>
<p>propiedades: para configurar los proyectos.</p>
</li>
<li>
<p>extensiones: para extender las funcionalidades de los proyectos.</p>
</li>
<li>
<p>meta datos: para describir los proyectos.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instalación">Instalación</h3>
<div class="ulist">
<div class="title">Instalación en Windows:</div>
<ul>
<li>
<p>Descargar Gradle desde <a href="https://gradle.org/releases/" class="bare">https://gradle.org/releases/</a></p>
</li>
<li>
<p>Descomprimir el archivo descargado en la carpeta C:\Gradle</p>
</li>
<li>
<p>Agregar la ruta C:\Gradle\gradle-6.8.3\bin al PATH del sistema</p>
</li>
<li>
<p>Verificar la instalación ejecutando el comando gradle -v</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Instalar Gradle utilizando winget:</div>
<ul>
<li>
<p>Abrir una terminal de PowerShell como administrador</p>
</li>
<li>
<p>Ejecutar el comando winget install gradle</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Instalación en Linux:</div>
<p>Usa el gestor de paquetes de tu distribución para instalar Gradle.</p>
</div>
<div class="ulist">
<div class="title">Instalación en Mac:</div>
<ul>
<li>
<p>Instalar Homebrew desde <a href="https://brew.sh/" class="bare">https://brew.sh/</a></p>
</li>
<li>
<p>Ejecutar el comando brew install gradle</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_crear_un_proyecto_gradle">Crear un proyecto Gradle</h3>
<div class="ulist">
<div class="title">Para crear un proyecto Gradle:</div>
<ul>
<li>
<p>Crear una carpeta para el proyecto</p>
</li>
<li>
<p>Abrir una terminal en la carpeta creada</p>
</li>
<li>
<p>Ejecutar el comando gradle init</p>
</li>
<li>
<p>Seleccionar la opción '2: application'</p>
</li>
<li>
<p>Seleccionar la opción '3: Java'</p>
</li>
<li>
<p>Seleccionar la opción '1: Groovy'</p>
</li>
<li>
<p>Seleccionar la opción '1: JUnit 4'</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Las estructura de carpetas del proyecto será la siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">├── app
│   ├── build
│   ├── src
│   │   ├── main
│   │   │   ├── java
│   │   │   │   └── App.java
│   │   │   └── resources
│   ├── build.gradle
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
├── settings.gradle</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Los directorios por defecto de Gradle son:</div>
<ul>
<li>
<p>src/main/java: código fuente de la aplicación</p>
</li>
<li>
<p>src/main/resources: recursos de la aplicación</p>
</li>
<li>
<p>src/test/java: código fuente de los tests</p>
</li>
<li>
<p>src/test/resources: recursos de los tests</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Archivos relevantes:</div>
<ul>
<li>
<p>build.gradle: archivo de configuración de Gradle para el proyecto (obligatorio)</p>
</li>
<li>
<p>settings.gradle: archivo de configuración de Gradle para el proyecto (opcional)</p>
</li>
<li>
<p>App.java: clase principal de la aplicación</p>
</li>
<li>
<p>gradlew: script para ejecutar Gradle en Linux y Mac (también se puede usar en Windows con PowerShell)</p>
</li>
<li>
<p>gradlew.bat: script para ejecutar Gradle en Windows con CMD</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Para obtener ayuda sobre los comandos de Gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle help</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para obtener las tareas disponibles en el proyecto:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle tasks</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para compilar y ejecutar la aplicación:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle build
gradle run</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para llevar a la build la carpeta resources:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle processResources</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para crear un archivo JAR con la aplicación:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle jar</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para testear la aplicación:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle test</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para limpiar el proyecto:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">gradle clean</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuración_de_gradle">Configuración de Gradle</h3>
<div class="paragraph">
<p>El archivo build.gradle es el archivo de configuración principal en un proyecto de Gradle.</p>
</div>
<div class="ulist">
<div class="title">Los apartados principales en el archivo build.gradle son los siguientes:</div>
<ul>
<li>
<p><strong>plugins</strong>: En esta sección se declaran los plugins que se utilizarán en el proyecto. Los plugins proporcionan funcionalidades específicas para la construcción, prueba, empaquetado y distribución de proyectos.</p>
</li>
<li>
<p><strong>repositories</strong>: En esta sección se definen los repositorios de dependencias y plugins que Gradle debe buscar para descargar las dependencias necesarias para el proyecto.</p>
</li>
<li>
<p><strong>dependencies</strong>: En esta sección se declaran las dependencias del proyecto. Las dependencias son módulos de software que el proyecto utiliza y pueden ser bibliotecas, frameworks o herramientas.</p>
</li>
<li>
<p><strong>sourceSets</strong>: En esta sección se definen los directorios de código fuente y recursos del proyecto. Los directorios de código fuente contienen el código fuente del proyecto y los directorios de recursos contienen archivos de recursos, como archivos de propiedades o de configuración.</p>
</li>
<li>
<p><strong>tasks</strong>: En esta sección se definen las tareas de Gradle que se utilizarán en el proyecto. Las tareas son acciones que Gradle ejecuta para construir, probar o distribuir el proyecto.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_plugins">Plugins</h4>
<div class="paragraph">
<p>La sección plugins del archivo build.gradle es donde se declaran los plugins que se utilizarán en el proyecto. Los plugins son bibliotecas de software que proporcionan funcionalidades específicas para la construcción, prueba, empaquetado y distribución de proyectos. Los plugins de Gradle se pueden descargar desde un repositorio remoto o desde un archivo local.</p>
</div>
<div class="listingblock">
<div class="title">Los plugins se declaran en la sección plugins del archivo build.gradle de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">plugins {
    id 'java'
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Otro ejemplo de declaración de plugins para spring boot:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">plugins {
    id 'org.springframework.boot' version '3.0.0'
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_repositories">Repositories</h4>
<div class="paragraph">
<p>La sección repositories del archivo build.gradle es donde se definen los repositorios de dependencias y plugins que Gradle debe buscar para descargar las dependencias necesarias para el proyecto. Los repositorios pueden ser remotos, como Maven Central, o locales, almacenados en el sistema de archivos.</p>
</div>
<div class="listingblock">
<div class="title">Los repositorios se declaran en la sección repositories del archivo build.gradle de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">repositories {
    mavenCentral()
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Típicamente se declaran los siguientes repositorios:</div>
<ul>
<li>
<p><strong>mavenCentral</strong>: repositorio remoto de Maven Central</p>
</li>
<li>
<p><strong>jcenter</strong>: repositorio remoto de JCenter</p>
</li>
<li>
<p><strong>mavenLocal</strong>: repositorio local de Maven</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies">Dependencies</h4>
<div class="paragraph">
<p>La sección dependencies del archivo build.gradle es donde se declaran las dependencias que el proyecto necesita para su correcta ejecución. Las dependencias pueden ser bibliotecas de software de terceros o módulos internos del proyecto.</p>
</div>
<div class="listingblock">
<div class="title">Las dependencias se declaran en la sección dependencies del archivo build.gradle de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>En Gradle, existen diferentes tipos de dependencias que se pueden declarar en el bloque dependencies. Algunos de ellos son los siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>implementation</strong>: dependencias para la compilación y ejecución del proyecto.</p>
</li>
<li>
<p><strong>compileOnly</strong>: dependencias solo durante la compilación del proyecto, pero que no se requieren para su ejecución.</p>
</li>
<li>
<p><strong>testImplementation</strong>: dependencias solo durante la compilación y ejecución de las pruebas unitarias del proyecto.</p>
</li>
<li>
<p><strong>runtimeOnly</strong>: dependencias solo durante la ejecución del proyecto, pero no para su compilación.</p>
</li>
<li>
<p><strong>annotationProcessor</strong>: dependencias para la generación de código en tiempo de compilación, como las anotaciones de Java.</p>
</li>
<li>
<p><strong>api</strong>: Se utiliza para las dependencias que se exportan a otros proyectos que utilizan el proyecto actual como una dependencia.</p>
</li>
<li>
<p><strong>enforcedPlatform</strong>: Se utiliza para las dependencias que establecen un conjunto de versiones de dependencias comunes a todos los proyectos de un ecosistema.</p>
</li>
<li>
<p><strong>compileClasspath</strong>: dependencias para la compilación de un módulo en particular.</p>
</li>
<li>
<p><strong>runtimeClasspath</strong>: dependencias para la ejecución de un módulo en particular.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sourcesets">SourceSets</h4>
<div class="paragraph">
<p>La sección sourceSets del archivo build.gradle es donde se definen los directorios de código fuente y recursos del proyecto. Los directorios de código fuente contienen el código fuente del proyecto y los directorios de recursos contienen archivos de recursos, como archivos de propiedades o de configuración.</p>
</div>
<div class="listingblock">
<div class="title">Los directorios de código fuente y recursos se definen en la sección sourceSets del archivo build.gradle de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">sourceSets {
    main {
        java {
            srcDirs = ['src/main/java']
        }
        resources {
            srcDirs = ['src/main/resources']
        }
    }
    test {
        java {
            srcDirs = ['src/test/java']
        }
        resources {
            srcDirs = ['src/test/resources']
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tasks">Tasks</h4>
<div class="paragraph">
<p>La sección tasks en un archivo build.gradle se utiliza para definir tareas personalizadas que pueden ser ejecutadas en el proceso de construcción del proyecto. Las tareas en Gradle son acciones que se pueden ejecutar en el proyecto, como compilar código, ejecutar pruebas, crear un archivo JAR, o cualquier otra acción que necesites realizar en el proceso de construcción.</p>
</div>
<div class="paragraph">
<p>Por defecto, Gradle proporciona muchas tareas predefinidas que se pueden ejecutar, como clean, build, test, entre otras. Sin embargo, mediante la configuración de tasks, puedes crear tareas adicionales que se adapten a tus necesidades específicas.</p>
</div>
<div class="listingblock">
<div class="title">Las tareas se definen en la sección tasks del archivo build.gradle de la siguiente manera:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">task deploy(type: Exec) {
    commandLine 'ssh', 'user@server', 'cd /path/to/app', './deploy.sh'
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Para ejecutar la tarea se utiliza el comando:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gradle deploy</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gitlab_cicd">Gitlab CI/CD</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GitLab CI es una herramienta de integración y entrega continua (CI/CD) incorporada a GitLab. GitLab CI/CD permite automatizar la construcción, prueba y despliegue de aplicaciones de software, lo que permite a los equipos de desarrollo entregar código con mayor frecuencia de manera fiable.</p>
</div>
<div class="ulist">
<div class="title">GitLab CI/CD consta de dos partes principales: el CI (integración continua) y el CD (entrega continua).</div>
<ul>
<li>
<p><strong>Integración continua (CI)</strong>: Cuando se realiza un cambio en el repositorio de código, GitLab CI/CD ejecuta automáticamente la compilación, prueba y análisis de código.</p>
</li>
<li>
<p><strong>Entrega continua (CD)</strong>: Si todas las pruebas pasan, GitLab CI/CD implementa automáticamente el código en un entorno de prueba o en un entorno de producción, dependiendo de la configuración.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>GitLab CI/CD utiliza archivos YAML para definir el proceso de construcción, prueba y entrega. Los desarrolladores pueden definir diferentes flujos de trabajo para diferentes ramas, etiquetas y acciones en el repositorio de código.</p>
</div>
<div class="sect2">
<h3 id="_gitlab_cicd_pipeline">Gitlab CI/CD Pipeline</h3>
<div class="paragraph">
<p>Un pipeline de GitLab CI/CD es un conjunto de pasos que se ejecutan en un orden específico para construir, probar y desplegar aplicaciones de software.</p>
</div>
<div class="paragraph">
<p>El pipeline de GitLab CI/CD se define en un archivo YAML llamado .gitlab-ci.yml, que se encuentra en la raíz del repositorio de código. Este archivo define los diferentes jobs, su orden de ejecución y sus dependencias. El archivo YAML también define las reglas de branch y tags, para determinar en qué situaciones se debe ejecutar el pipeline.</p>
</div>
<div class="paragraph">
<p>Un pipeline de GitLab CI/CD se define en un archivo YAML llamado .gitlab-ci.yml, que se almacena en el repositorio de código.</p>
</div>
<div class="ulist">
<div class="title">Partes del archivo .gitlab-ci.yml:</div>
<ul>
<li>
<p><strong>image</strong>: especifica la imagen de Docker que se utilizará para ejecutar los pasos del pipeline.</p>
</li>
<li>
<p><strong>stages</strong>: especifica los pasos del pipeline.</p>
</li>
<li>
<p><strong>variables</strong>: especifica las variables de entorno que se utilizarán en los pasos del pipeline.</p>
</li>
<li>
<p><strong>before_script</strong>: especifica los comandos que se ejecutarán antes de cada paso del pipeline.</p>
</li>
<li>
<p><strong>script</strong>: especifica los comandos que se ejecutarán en cada paso del pipeline.</p>
</li>
<li>
<p><strong>after_script</strong>: especifica los comandos que se ejecutarán después de cada paso del pipeline.</p>
</li>
<li>
<p><strong>cache</strong>: especifica los directorios que se almacenarán en caché entre los pasos del pipeline.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Ejemplo de archivo .gitlab-ci.yml para un proyecto con Maven:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">image: maven:3-jdk-11

stages:
  - build
  - test
  - deploy

before_script:
  - apt-get update -y
  - apt-get install -y sshpass

cache:
  paths:
    - .m2/repository/

variables:
  MAVEN_OPTS: "-Dmaven.repo.local=.m2/repository"

build:
  stage: build
  script:
    - mvn clean package -DskipTests
  artifacts:
    paths:
      - target/*.jar

test:
  stage: test
  script:
    - mvn test

deploy:
  stage: deploy
  script:
    - sshpass -p $DEPLOY_PASSWORD ssh $DEPLOY_USER@$DEPLOY_SERVER "systemctl stop myapp.service"
    - scp target/*.jar $DEPLOY_USER@$DEPLOY_SERVER:/opt/myapp/
    - sshpass -p $DEPLOY_PASSWORD ssh $DEPLOY_USER@$DEPLOY_SERVER "systemctl start myapp.service"
  environment:
    name: production
    url: https://example.com/myapp
  only:
    - main</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de archivo .gitlab-ci.yml para un proyecto con Gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">image: gradle:latest

stages:
  - build
  - test
  - deploy

variables:
  GRADLE_OPTS: "-Dorg.gradle.daemon=false -Dorg.gradle.parallel=false"
  # En este ejemplo, se definen las siguientes variables de entorno para la implementación en Heroku
  HEROKU_APP_NAME: my-heroku-app
  HEROKU_API_KEY: $HEROKU_API_KEY

cache:
  key: "$CI_COMMIT_REF_SLUG-gradle"
  paths:
    - .gradle/wrapper
    - .gradle/caches

before_script:
  - chmod +x gradlew

build:
  stage: build
  script:
    - ./gradlew assemble
  artifacts:
    paths:
      - build/libs/*.jar

test:
  stage: test
  script:
    - ./gradlew test

deploy:
  stage: deploy
  script:
    - echo "$HEROKU_API_KEY" | docker login -u _ --password-stdin registry.heroku.com
    - docker build -t registry.heroku.com/$HEROKU_APP_NAME/web .
    - docker push registry.heroku.com/$HEROKU_APP_NAME/web
    - heroku container:release web --app $HEROKU_APP_NAME
  environment:
    name: production
  only:
    - main</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ejemplo de archivo .gitlab-ci.yml para una aplicación en Docker:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">image: docker:stable

services:
  - docker:dind

stages:
  - build
  - test
  - deploy

variables:
  DOCKER_DRIVER: overlay2
  DOCKER_TLS_CERTDIR: ""
  DOCKER_HOST: tcp://docker:2375

cache:
  key: "${CI_COMMIT_REF_SLUG}-docker"
  paths:
    - .docker/

build:
  stage: build
  script:
    - docker build -t myapp .
    - docker save -o myapp.tar myapp
  artifacts:
    paths:
      - myapp.tar

test:
  stage: test
  script:
    - docker load -i myapp.tar
    - docker run --rm myapp mvn test

deploy:
  stage: deploy
  script:
    - docker load -i myapp.tar
    - docker tag myapp $DOCKER_REGISTRY/myapp:$CI_COMMIT_REF_NAME
    - docker login -u $DOCKER_REGISTRY_USER -p $DOCKER_REGISTRY_PASSWORD $DOCKER_REGISTRY
    - docker push $DOCKER_REGISTRY/myapp:$CI_COMMIT_REF_NAME
  environment:
    name: production
    url: https://example.com/myapp
  only:
    - main</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gitlab_cicd_jobs">Gitlab CI/CD Jobs</h3>
<div class="paragraph">
<p>Los jobs representan tareas que se ejecutan en un runner específico en respuesta a un evento de CI/CD yse agrupan en etapas (stages) que se ejecutan secuencialmente.</p>
</div>
<div class="ulist">
<div class="title">Por ejemplo, una configuración típica de etapas para una aplicación web podría ser:</div>
<ul>
<li>
<p><strong>build</strong>: compilar el código fuente de la aplicación.</p>
</li>
<li>
<p><strong>test</strong>: ejecutar pruebas unitarias y de integración.</p>
</li>
<li>
<p><strong>deploy</strong>: implementar la aplicación en un entorno de producción.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cada job en una etapa se ejecuta en paralelo en un runner. Si un job falla, los jobs en etapas posteriores no se ejecutarán.</p>
</div>
<div class="ulist">
<div class="title">Un job se define con las siguientes propiedades:</div>
<ul>
<li>
<p><strong>stage</strong>: especifica la etapa en la que se ejecutará el job.</p>
</li>
<li>
<p><strong>script</strong>: especifica los comandos que se ejecutarán en el job.</p>
</li>
<li>
<p><strong>artifacts</strong>: especifica los archivos que se almacenarán como artefactos del job.</p>
</li>
<li>
<p><strong>environment</strong>: especifica el entorno en el que se ejecutará el job.</p>
</li>
<li>
<p><strong>only</strong>: especifica las ramas en las que se ejecutará el job.</p>
</li>
<li>
<p><strong>except</strong>: especifica las ramas en las que no se ejecutará el job.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de job para compilar una aplicación Java con Gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">build:
  stage: build
  script:
    - ./gradlew assemble
  artifacts:
    paths:
      - build/libs/*.jar
  only:
    - main
  environment:
    name: production</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gitlab_cicd_artifacts">Gitlab CI/CD Artifacts</h3>
<div class="paragraph">
<p>Los artifacts son archivos que se generan en un job y se almacenan para su uso posterior en otro job o como resultado final del pipeline. Los artifacts se pueden utilizar para compartir archivos entre jobs, archivar archivos de construcción o para proporcionar un artefacto compilado para su descarga.</p>
</div>
<div class="ulist">
<div class="title">Los artifacts se definen con las siguientes propiedades:</div>
<ul>
<li>
<p><strong>paths</strong>: una lista de patrones de archivos o directorios que se deben almacenar como artifacts.</p>
</li>
<li>
<p><strong>name</strong>: el nombre de la carpeta donde se almacenarán los artifacts. Por defecto, el nombre es el nombre del job.</p>
</li>
<li>
<p><strong>untracked</strong>: si se establece en true, GitLab CI/CD también almacenará los archivos no rastreados por Git.</p>
</li>
<li>
<p><strong>when</strong>: determina cuándo se deben almacenar los artifacts. Puede ser <strong>on_success</strong>, <strong>on_failure</strong>, <strong>always</strong> o <strong>manual</strong>.</p>
</li>
<li>
<p><strong>expire_in</strong>: el tiempo de expiración para los artifacts. Después de este tiempo, los artifacts se eliminarán automáticamente.</p>
</li>
<li>
<p><strong>reports</strong>: una lista de informes adicionales que se deben generar y almacenar como artifacts.</p>
</li>
<li>
<p><strong>dependencies</strong>: una lista de jobs en los que se deben basar los artifacts del job actual.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de artifacts para una aplicación Java con Gradle:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">stages:
  - build
  - test

build:
  stage: build
  script:
    - ./gradlew build
  artifacts:
    name: "my-artifacts"
    paths:
      - build/libs/*.jar
    untracked: false
    when: on_success
    expire_in: 1 week
    dependencies:
      - test

test:
  stage: test
  script:
    - ./gradlew test
  artifacts:
    reports:
      junit:
        - build/test-results/test/*.xml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gitlab_cicd_schedules">Gitlab CI/CD Schedules</h3>
<div class="paragraph">
<p>Schedules permite ejecutar los pipelines a intervalos regulares, programados previamente por el usuario. Esto es especialmente útil para tareas que deben ejecutarse regularmente en momentos específicos, como pruebas automatizadas, actualizaciones de bases de datos o compilaciones de artefactos.</p>
</div>
<div class="ulist">
<div class="title">Los schedules se definen con las siguientes propiedades:</div>
<ul>
<li>
<p><strong>cron</strong>: Define el cron que se usará para ejecutar el job programado. Esta propiedad toma una expresión cron y determina el momento en que se ejecutará el job. La sintaxis de una expresión cron consta de cinco campos separados por espacios que indican el minuto, hora, día del mes, mes y día de la semana en que se ejecutará el job. Por ejemplo: "0 9 * * 1,3" ejecutará el job a las 9:00 a.m. los lunes y miércoles.</p>
</li>
<li>
<p><strong>cron_timezone</strong>: Define la zona horaria en la que se ejecutará el cron. Esta propiedad toma una zona horaria válida y se utiliza para asegurarse de que el job se ejecute en el horario local correcto. La zona horaria predeterminada es UTC.</p>
</li>
<li>
<p><strong>description</strong>: Proporciona una descripción opcional para el schedule.</p>
</li>
<li>
<p><strong>job</strong>: Define el nombre del job que se ejecutará en el schedule.</p>
</li>
<li>
<p><strong>ref</strong>: Especifica la rama o etiqueta en la que se ejecutará el job. Si no se especifica, se utilizará la rama predeterminada.</p>
</li>
<li>
<p><strong>cron_description</strong>: Proporciona una descripción adicional para la expresión cron que se usa en el schedule.</p>
</li>
<li>
<p><strong>run_immediately</strong>: Si se establece en true, se ejecutará el job inmediatamente después de guardar la programación.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Un ejemplo de schedule para ejecutar un job de prueba cada día a las 12:00:</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># Define un schedule para ejecutar pruebas cada lunes y miércoles a las 9am UTC
unit_tests_schedule:
  schedule:
    cron: "0 9 * * 1,3"
    cron_timezone: "UTC"
    description: "Ejecuta pruebas unitarias dos veces por semana"
  script:
    - ./gradlew test
  tags:
    - docker
  only:
    refs:
      - master

# Define un schedule para ejecutar pruebas de integración cada domingo a las 8am UTC
integration_tests_schedule:
  schedule:
    cron: "0 12 * * 0"
    cron_timezone: "UTC"
    description: "Ejecuta pruebas de integración una vez por semana"
  script:
    - ./gradlew integrationTest
  tags:
    - docker
  only:
    refs:
      - master</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-05-16 07:51:13 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>